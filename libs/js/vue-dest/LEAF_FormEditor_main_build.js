(()=>{"use strict";var e={705:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var o="",n=void 0!==t[5];return t[4]&&(o+="@supports (".concat(t[4],") {")),t[2]&&(o+="@media ".concat(t[2]," {")),n&&(o+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),o+=e(t),n&&(o+="}"),t[2]&&(o+="}"),t[4]&&(o+="}"),o})).join("")},t.i=function(e,o,n,i,r){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(n)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(a[l]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);n&&a[d[0]]||(void 0!==r&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=r),o&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=o):d[2]=o),i&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=i):d[4]="".concat(i)),t.push(d))}},t}},738:e=>{e.exports=function(e){return e[1]}},481:(e,t,o)=>{o.d(t,{Z:()=>s});var n=o(738),i=o.n(n),r=o(705),a=o.n(r)()(i());a.push([e.id,'body{min-width:-moz-fit-content;min-width:fit-content}#vue-formeditor-app{padding:2rem 1rem;min-height:100vh}#vue-formeditor-app *{box-sizing:border-box}#vue-formeditor-app button{display:flex;justify-content:center;align-items:center;cursor:pointer;border-radius:3px;white-space:nowrap;font-weight:bolder}button.btn-general,button.btn-confirm,button.can_update{background-color:#fff;color:#005ea2;font-weight:bolder;padding:.2em .4em;border-radius:3px;border:2px solid #005ea2}button.btn-general:not(.disabled):hover,button.btn-general:not(.disabled):focus,button.btn-general:not(.disabled):active,button.btn-confirm:not(.disabled):hover,button.btn-confirm:not(.disabled):focus,button.btn-confirm:not(.disabled):active,button.can_update:not(.disabled):hover,button.can_update:not(.disabled):focus,button.can_update:not(.disabled):active{background-color:#005ea2;color:#fff;border:2px solid #000 !important;box-shadow:0 0 3px rgba(0,0,30,.4)}button.btn-general.disabled,button.btn-confirm.disabled,button.can_update.disabled{cursor:auto !important}button.buttonNorm:hover,button.buttonNorm:focus,button.buttonNorm:active{border:1px solid #000 !important}button.btn-confirm{color:#fff;background-color:#005ea2}button.can_update{margin-left:auto}#form-editor-header{position:relative;display:flex;align-items:center;margin-bottom:1.5rem;padding:.5rem .2rem;height:50px}#form-editor-header h1,#form-editor-header h2,#form-editor-header h3{margin:0;display:flex;justify-content:center;align-items:center}#form-editor-header button{color:#000;padding-left:2px;border:2px solid #252f3e;height:2rem}#form-editor-header button:hover,#form-editor-header button:focus,#form-editor-header button:active{border:2px outset #252f3e !important;outline:2px solid #20a0f0 !important}#form-editor-header button#form-editor-menu-toggle{padding:.2em;margin-right:.4rem;color:#fff;background-color:#000;border:2px outset #667}#form-editor-header button#form-editor-menu-toggle>span{margin-right:4px;font-size:1.2rem;font-weight:normal;display:inline-block;width:10px;transform:translate(0, 1px);color:#00bde3}#form-editor-header .header-icon{font-size:80%}#form-editor-header .header-arrow{position:absolute;font-size:1.5rem;top:50%;transform:translateY(-50%);right:-1.5rem;font-weight:bold}#form-editor-header nav{display:flex;justify-content:center;align-items:center}#form-editor-header nav>ul{display:flex;justify-content:center;align-items:center}#form-editor-header nav>ul>li{position:relative;align-self:stretch}#form-editor-header nav>ul>li:not(:first-child){margin-right:2.25rem}#form-editor-header nav ul{list-style-type:none;position:relative;margin:0;padding:0}#form-editor-header ul#form-editor-menu,#form-editor-header ul#internalForms{display:flex;flex-direction:column;position:absolute;top:calc(100% + .5rem);z-index:1;width:200px;background-color:#e8f2ff;border:1px solid #000;border-bottom:0;border-radius:3px;box-shadow:1px 1px 4px 1px rgba(0,0,30,.3)}#form-editor-header ul#form-editor-menu li,#form-editor-header ul#internalForms li{display:flex;flex-direction:column;color:#252f3e}#form-editor-header ul#form-editor-menu li a,#form-editor-header ul#internalForms li a{display:flex;justify-content:center;align-items:center;justify-content:space-between;height:100%;min-height:36px;text-decoration:none;color:inherit;padding:0 .2em 0 .4em;border-bottom:1px solid #000}#form-editor-header ul#form-editor-menu li a.selected,#form-editor-header ul#form-editor-menu li a:hover,#form-editor-header ul#form-editor-menu li a:focus,#form-editor-header ul#form-editor-menu li a:active,#form-editor-header ul#internalForms li a.selected,#form-editor-header ul#internalForms li a:hover,#form-editor-header ul#internalForms li a:focus,#form-editor-header ul#internalForms li a:active{z-index:1;background-color:#005ea2;outline:2px solid #20a0f0 !important;color:#fff}#form-editor-header ul#form-editor-menu li ul,#form-editor-header ul#internalForms li ul{display:flex;flex-direction:column}#form-editor-header ul#form-editor-menu li.stapled-form,#form-editor-header ul#internalForms li.stapled-form{color:#e8f2ff;background-color:#4f6685}#leaf-vue-dialog-background{display:flex;justify-content:center;align-items:center;width:100vw;height:100%;z-index:999;background-color:rgba(0,0,20,.5);position:absolute;left:0;top:0}.leaf-vue-dialog{position:absolute;margin:auto;width:auto;min-width:450px;resize:horizontal;z-index:9999;min-width:400px;max-width:900px;height:auto;min-height:0;border-radius:4px;background-color:#fff;box-shadow:0 0 5px 1px rgba(0,0,25,.25);overflow:hidden}.leaf-vue-dialog p{margin:0;padding:0;line-height:1.5}.leaf-vue-dialog>div{padding:.75rem 1rem}.leaf-vue-dialog .leaf-vue-dialog-title{color:#252f3e;border-top:3px solid #fff;border-left:3px solid #fff;border-right:3px solid #cadff0;border-bottom:2px solid #cadff0;border-radius:3px;background-color:#e0f4fa;cursor:move}.leaf-vue-dialog .leaf-vue-dialog-title h2{color:inherit;margin:0}.leaf-vue-dialog #leaf-vue-dialog-close{display:flex;justify-content:center;align-items:center;position:absolute;top:8px;right:8px;width:25px;height:25px;cursor:pointer;font-weight:bold;font-size:1.2rem}.leaf-vue-dialog #leaf-vue-dialog-cancel-save{display:flex;justify-content:space-between;margin-top:1em}.leaf-vue-dialog select,.leaf-vue-dialog input:not([type=checkbox]){width:50%}.leaf-vue-dialog input[type=file]{width:100%}#indicator-editing-dialog-content>div,#indicator-editing-dialog-content #non-name-wrapper>div{margin-bottom:1rem}#indicator-editing-dialog-content label{font-family:sans-serif;font-weight:bolder;padding-right:.2rem;white-space:nowrap}#indicator-editing-dialog-content input,#indicator-editing-dialog-content select{height:24px}#indicator-editing-dialog-content #name{width:100%;margin:.2rem 0 .4rem 0;padding:.2rem .4rem;display:block}#indicator-editing-dialog-content #non-name-wrapper{position:relative;margin-bottom:1.75rem}#indicator-editing-dialog-content #non-name-wrapper #description,#indicator-editing-dialog-content #non-name-wrapper #indicatorType,#indicator-editing-dialog-content #non-name-wrapper #defaultValue,#indicator-editing-dialog-content #non-name-wrapper #indicatorMultiAnswer{width:100%;margin-top:.1rem}#indicator-editing-dialog-content #non-name-wrapper button#editing-format-assist{align-self:flex-end;font-weight:normal;font-size:80%;margin-left:.2rem}#indicator-editing-dialog-content #non-name-wrapper #indicator-editing-attributes{margin:0;padding:1em .75em .5em .75em;border-radius:5px;border:1px solid #ccd;width:-moz-fit-content;min-width:fit-content}#indicator-editing-dialog-content #non-name-wrapper #indicator-editing-attributes label{font-weight:normal}#indicator-editing-dialog-content #non-name-wrapper #indicator-editing-attributes .attribute-row{display:flex;align-items:center;justify-content:flex-start;margin-bottom:.75rem}#indicator-editing-dialog-content #archived-warning,#indicator-editing-dialog-content #deletion-warning{position:absolute;left:2px;bottom:-1.25rem;color:#d00;font-size:90%}#indicator-editing-dialog-content #addColumnBtn{padding:.4em}#indicator-editing-dialog-content div.cell{width:200px;min-width:200px;text-align:center;border:1px gray solid;padding:10px;vertical-align:top;display:table-cell}#indicator-editing-dialog-content div.cell span.columnNumber{display:flex;justify-content:center;align-items:center;margin-bottom:1rem;font-weight:bolder}#indicator-editing-dialog-content div.cell input,#indicator-editing-dialog-content div.cell select{width:100%;margin-bottom:1rem}#indicator-editing-dialog-content div.cell label{padding:0;display:flex;margin-bottom:3px}#edit-properties-panel{padding:0;position:relative;display:flex;margin-bottom:1.5em;background-color:#fff;border:2px solid #252f3e;border-radius:4px;box-shadow:1px 1px 2px 1px rgba(0,0,20,.4)}#edit-properties-panel>div{min-width:400px;padding:.75rem;display:flex;flex-direction:column}#edit-properties-panel #edit-properties-description{position:relative;display:flex;flex-direction:column;width:40%;height:100%;align-self:center;border-right:1px solid #252f3e}#edit-properties-panel #edit-properties-description #categoryName{width:100%}#edit-properties-panel #edit-properties-description textarea{width:100%;height:100%;margin-top:2px;padding:.2rem .5rem;border:1px inset #dde;border-radius:2px;resize:none}#edit-properties-panel #edit-properties-other-properties{width:60%}#edit-properties-panel .form-id{position:absolute;right:1rem;bottom:1px;font-size:.75rem}#edit-properties-panel label{display:flex;align-items:center;flex-wrap:nowrap;white-space:nowrap;column-gap:3px}#edit-properties-panel .panel-properties{display:flex;flex-wrap:wrap;align-items:center;margin-top:1rem;row-gap:1rem;height:100%;align-content:center}#edit-properties-panel input,#edit-properties-panel select{border:1px inset #dde;border-radius:2px;font-family:"Source Sans Pro Web","Helvetica Neue",Helvetica,"Roboto",Arial,sans-serif;line-height:normal;min-height:24px}#edit-properties-panel input{padding-left:.4em}#edit-properties-panel #workflowID,#edit-properties-panel #availability,#edit-properties-panel #categorySort,#edit-properties-panel #formType{margin-right:1.5rem}#history-slice td{font-size:14px !important}#history-page-buttons button#next,#history-slice button#prev{width:135px}.browser-category-card{position:relative;margin:0 1rem 1rem 0;width:340px;height:180px;display:flex;flex-direction:column;background-color:#fff;cursor:pointer;transition:box-shadow .3s ease;border-radius:4px;color:#000;overflow:hidden;box-shadow:1px 1px 2px 1px rgba(0,0,20,.4)}.browser-category-card:hover,.browser-category-card:focus,.browser-category-card:active{box-shadow:0 4px 6px 3px rgba(0,0,20,.25)}.browser-category-card>div{padding:.2rem .4rem}.browser-category-card .formPreviewTitle{font-weight:bold;padding:.4rem}.browser-category-card .formPreviewDescription{height:100%;font-size:14px;line-height:1.3}.browser-category-card .formPreviewStatus{margin-top:auto;font-size:80%;color:#d00}.browser-category-card .formPreviewWorkflow{display:flex;align-items:center;width:100%;color:#fff;background-color:#162e51}div#form_content_view{margin:0 auto;display:flex;flex-direction:column;width:100%}#form_index_and_editing{display:flex}#form_index_display{position:relative;margin:0;padding:1rem 1rem .25rem 1rem;width:400px;flex:0 0 400px;align-self:flex-start;margin-right:1.5rem;background-color:#fff;border-radius:4px;box-shadow:1px 1px 2px 1px rgba(0,0,20,.4)}#form_index_display .section_heading{font-weight:bolder;color:#005ea2}#form_index_display .subindicator_heading{font-weight:normal;color:#000}#form_index_display ul{margin:0;padding:0 0 4px 0;padding-left:1em;display:flex;flex-direction:column;list-style-type:none;min-height:6px}#form_index_display ul#base_drop_area{padding:0 0 6px 0}#form_index_display ul.entered-drop-zone{background-color:#e8ebf0}#form_index_display li{position:relative;cursor:grab;margin:.2em 0;border-radius:2px;outline:none !important}#form_index_display li>div{display:flex;align-items:center;width:100%;height:40px;border-bottom:1px solid #d0d0d4;padding-bottom:.9em}#form_index_display li>div .icon_move_container{display:flex;justify-content:center;align-items:center;flex-direction:column;margin-left:auto;margin-right:.2em}#form_index_display li>div .icon_move_container .icon_move{display:flex;justify-content:center;align-items:center;cursor:pointer;width:0;height:0;background-color:rgba(0,0,0,0);border-radius:2px;border:8px solid rgba(0,0,0,0);margin-left:auto}#form_index_display li>div .icon_move_container .icon_move.up{margin-bottom:.4em;border-bottom:14px solid #162e51}#form_index_display li>div .icon_move_container .icon_move.up:hover,#form_index_display li>div .icon_move_container .icon_move.up:focus,#form_index_display li>div .icon_move_container .icon_move.up:active{outline:none !important;border-bottom:14px solid #00bde3}#form_index_display li>div .icon_move_container .icon_move.down{border-top:14px solid #162e51}#form_index_display li>div .icon_move_container .icon_move.down:hover,#form_index_display li>div .icon_move_container .icon_move.down:focus,#form_index_display li>div .icon_move_container .icon_move.down:active{outline:none !important;border-top:14px solid #00bde3}#form_index_display li>div .sub-menu-chevron{height:100%;align-self:center;font-size:1.4em;font-weight:bold;border-radius:3px;cursor:pointer;transform:scaleX(0.6)}#form_index_display li:first-child{margin-top:.8em}#form_index_display li:last-child{margin-bottom:0}#form_index_display li.index-selected::before,#form_index_display li:focus::before{position:absolute;top:-0.2em;left:-0.5em;content:"";width:3px;height:calc(100% - .6em);border-radius:60%/3px;background-color:#005ea2}#form_entry_and_preview{display:flex;flex-direction:column;align-self:flex-start;width:100%;background-color:#fff;border:1px solid #000}#form_entry_and_preview .form-section-header{display:flex;align-items:center;padding:.4rem .75rem;background-color:#005ea2;border-top:2px solid #000}#form_entry_and_preview .form-section-header h3{margin:0;width:100%;height:100%;color:#fff}#form_entry_and_preview .form-section-header #indicator_toolbar_toggle{cursor:pointer;width:100px;flex:0 0 100px;background-color:#162e51;color:#f0f2fd;padding:.15em .4em;border:1px solid #000;border-radius:2px;font-size:90%}#form_entry_and_preview .form-section-header #indicator_toolbar_toggle:hover,#form_entry_and_preview .form-section-header #indicator_toolbar_toggle:focus,#form_entry_and_preview .form-section-header #indicator_toolbar_toggle:active{background-color:#000;color:#fff;border:1px solid #fff !important}#form_entry_and_preview div.printformblock{page-break-inside:avoid}#form_entry_and_preview div.printResponse{padding:0;float:none}#form_entry_and_preview button.icon{margin-right:.3em;padding:0;background-color:rgba(0,0,0,0);border-radius:2px;border:0}#form_entry_and_preview button.icon:hover,#form_entry_and_preview button.icon:focus,#form_entry_and_preview button.icon:active{outline:3px solid #1476bd !important}#form_entry_and_preview button.icon img{display:block}#form_entry_and_preview button.add-subquestion{padding:.2em .4em .1em .4em;font-size:90%;width:-moz-fit-content;width:fit-content}#form_entry_and_preview .form_editing_area{padding-bottom:1rem}#form_entry_and_preview .form_editing_area>div{padding:.5rem .75rem}#form_entry_and_preview .form_editing_area .indicator-name-preview{padding:.75rem .75rem 0 .75rem}#form_entry_and_preview .form_editing_area .indicator-name-preview>p{display:inline}#form_entry_and_preview .form_editing_area .indicator-name-preview .input-required-sensitive{color:#d00;margin-left:.4em}#form_entry_and_preview .form_editing_area.conditional{color:#fff;background-color:#162e51}#form_entry_and_preview .form_editing_area.conditional .adv-options-icon{color:#b0ffd0}#form_entry_and_preview .form_editing_area.conditional .input-required-sensitive{color:#f88}#form_entry_and_preview .form_editing_area.conditional img.sensitive-icon{filter:brightness(400%)}#form_entry_and_preview .form_editing_area div[id^=form_editing_toolbar_]{padding:.2rem .75rem;display:flex;justify-content:space-between;align-items:center;background-color:rgba(240,242,253,.8);border-top:1px solid #000;font-size:90%;color:#000}#form_entry_and_preview .form_editing_area div[id^=form_editing_toolbar_] span.sensitive-icon{display:flex;align-items:center;margin-left:.4rem}#form_entry_and_preview .form_editing_area div[id^=form_editing_toolbar_].conditional{background-color:rgba(240,242,253,.1);color:#fff}#form_entry_and_preview .form_editing_area div[id^=form_editing_toolbar_] img{max-width:none}#form_entry_and_preview .form_editing_area div[id^=form_editing_toolbar_] .toolbar-edit{background-color:#005ea2;color:#fff;margin:0 .4em;padding:.2em .6em;font-size:80%;height:100%;border-radius:3px;letter-spacing:1px;border:1px outset #005ea2}#form_entry_and_preview .form_editing_area.form-header{background-color:#feffd1;font-weight:bolder}#form_entry_and_preview .form_editing_area.form-header .indicator-name-preview,#form_entry_and_preview .form_editing_area.form-header div[id^=form_editing_toolbar_] button{font-size:116%}#form_entry_and_preview .form_editing_area .form_data_entry_preview{padding:0 .75rem}#form_entry_and_preview .form_editing_area .form_data_entry_preview .format-preview{position:relative;margin-top:.2em}#form_entry_and_preview .form_editing_area .form_data_entry_preview .format-preview .text_input_preview{display:inline-block;width:50%;font-size:1.3em;font-family:monospace;background-color:#fff;border:1px solid gray;padding:.25em}#form_entry_and_preview .form_editing_area .form_data_entry_preview .format-preview .textarea_input_preview{width:100%;padding:.5em;font-size:1.3em;font-family:monospace}#form_entry_and_preview .form_editing_area .form_data_entry_preview .format-preview div.tableinput{overflow:scroll;max-width:900px}#form_entry_and_preview .form_editing_area .form_data_entry_preview .format-preview div.tableinput table{margin:0}#form_entry_and_preview .form_editing_area .form_data_entry_preview .format-preview div.tableinput table input{width:100%}#form_entry_and_preview .form_editing_area .form_data_entry_preview .format-preview div.tableinput table img{max-width:none}#form_entry_and_preview .form_editing_area .form_data_entry_preview .format-preview .employeeSelectorInput,#form_entry_and_preview .form_editing_area .form_data_entry_preview .format-preview .groupSelectorInput,#form_entry_and_preview .form_editing_area .form_data_entry_preview .format-preview .positionSelectorInput{margin-bottom:.5em}.checkable.leaf_check{font-family:Source Sans Pro Web,sans-serif;cursor:pointer;position:relative;display:flex;align-items:center;width:-moz-fit-content;width:fit-content;max-width:600px;margin-bottom:.2em}input[class*=icheck][class*=leaf_check],input[class*=ischecked][class*=leaf_check]{opacity:0;cursor:pointer;width:18px;flex:0 0 18px;height:18px;margin:2px}span.leaf_check{position:absolute;top:50%;transform:translate(0, -50%);left:0;width:18px;height:18px;background-color:rgba(0,0,0,0);border:1px solid #979695;border-radius:2px}span.leaf_check:hover,span.leaf_check:focus,span.leaf_check:active,input[class*=ischecked][class*=leaf_check]:focus~span.leaf_check,input[class*=icheck][class*=leaf_check]:focus~span.leaf_check{border:2px solid #47e}input[type=radio][class*=icheck][class*=leaf_check]~span.leaf_check{border-radius:50%}span.leaf_check::after{content:"";box-sizing:content-box;position:absolute;top:10%;left:30%;width:25%;height:50%;background-color:rgba(0,0,0,0);border:1px solid #fff;border-width:0px 3px 3px 0px;border-radius:2px;transform:rotate(40deg);display:none}input[class*=icheck][class*=leaf_check]:checked~span.leaf_check,input[class*=ischecked][class*=leaf_check]:checked~span.leaf_check{background-color:#47e;border:1px solid #47e;opacity:1}input[class*=icheck][class*=leaf_check]:checked~span.leaf_check::after,input[class*=ischecked][class*=leaf_check]:checked~span.leaf_check::after{display:block}.choices__inner div.choices__item.choices__item--selectable,.choices__inner div.choices__item.is-highlighted{background-color:#f6faff;background-image:linear-gradient(0, #eee 50%, #fff 53%);border:1px solid #aaa;border-radius:4px;color:#000}button.choices__button{filter:brightness(25%)}button.choices__button:hover,button.choices__button:focus,button.choices__button:active{filter:brightness(0);transform:scale(1.05);border-left:1px solid #000 !important}.choices__list{color:#000}.choices__list.choices__list--dropdown.is-active .is-highlighted{background-color:#e8f2ff;box-shadow:0px 0px 1px 1px rgba(0,165,187,.3764705882) inset}.choices__list[aria-expanded] .choices__item--selectable.is-highlighted::after{opacity:.75}.choices input{float:none}.choices input:hover,.choices input:focus,.choices input:active{outline:none}@media only screen and (max-width: 550px){#vue-formeditor-app{padding:1rem 0;min-width:350px}#vue-formeditor-app>div{flex-direction:column}#vue-formeditor-app>div #form-editor-menu{width:100%;margin:0}#vue-formeditor-app>div #form-editor-menu a{border-radius:0}#vue-formeditor-app #form-editor-header{height:auto;padding:0}#vue-formeditor-app #form-editor-header nav{width:100%;justify-content:flex-start}#vue-formeditor-app #form-editor-header nav>ul{flex-direction:column;width:100%}#vue-formeditor-app #form-editor-header nav>ul>li{align-self:flex-start}#vue-formeditor-app #form-editor-header nav>ul>li:first-child{margin-left:auto}#vue-formeditor-app #form-editor-header nav>ul>li button{margin:.5rem 0}#vue-formeditor-app #form-editor-header nav>ul>li #form-editor-menu{left:-132px}#vue-formeditor-app #secure_forms_info{display:flex;flex-wrap:wrap;justify-content:space-between}#vue-formeditor-app #forms,#vue-formeditor-app #forms_inactive{justify-content:center}#vue-formeditor-app div#form_content_view{margin:0}#vue-formeditor-app #edit-properties-panel{flex-direction:column}#vue-formeditor-app #edit-properties-panel>div{width:100%}#vue-formeditor-app #edit-properties-panel #edit-properties-description{border-right:0;border-bottom:1px solid #252f3e}#vue-formeditor-app #edit-properties-panel #edit-properties-other-properties{flex-direction:column-reverse}#vue-formeditor-app #edit-properties-panel #edit-properties-other-properties .panel-properties{margin-top:0;margin-bottom:1rem}#vue-formeditor-app #form_entry_and_preview{min-width:400px}#vue-formeditor-app #form_index_and_editing{flex-direction:column}#vue-formeditor-app #form_index_and_editing #form_index_display{width:100%;margin:0;margin-bottom:1rem;flex:0 0 100%}#vue-formeditor-app #form_index_and_editing .form_editing_area.form-header .indicator-name-preview,#vue-formeditor-app #form_index_and_editing .form_editing_area.form-header div[id^=form_editing_toolbar_]{font-size:100%}}',""]);const s=a},379:e=>{var t=[];function o(e){for(var o=-1,n=0;n<t.length;n++)if(t[n].identifier===e){o=n;break}return o}function n(e,n){for(var r={},a=[],s=0;s<e.length;s++){var l=e[s],c=n.base?l[0]+n.base:l[0],d=r[c]||0,u="".concat(c," ").concat(d);r[c]=d+1;var p=o(u),m={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)t[p].references++,t[p].updater(m);else{var f=i(m,n);n.byIndex=s,t.splice(s,0,{identifier:u,updater:f,references:1})}a.push(u)}return a}function i(e,t){var o=t.domAPI(t);return o.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;o.update(e=t)}else o.remove()}}e.exports=function(e,i){var r=n(e=e||[],i=i||{});return function(e){e=e||[];for(var a=0;a<r.length;a++){var s=o(r[a]);t[s].references--}for(var l=n(e,i),c=0;c<r.length;c++){var d=o(r[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}r=l}}},569:e=>{var t={};e.exports=function(e,o){var n=function(e){if(void 0===t[e]){var o=document.querySelector(e);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(e){o=null}t[e]=o}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(o)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,o)=>{e.exports=function(e){var t=o.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(o){!function(e,t,o){var n="";o.supports&&(n+="@supports (".concat(o.supports,") {")),o.media&&(n+="@media ".concat(o.media," {"));var i=void 0!==o.layer;i&&(n+="@layer".concat(o.layer.length>0?" ".concat(o.layer):""," {")),n+=o.css,i&&(n+="}"),o.media&&(n+="}"),o.supports&&(n+="}");var r=o.sourceMap;r&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,o)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function o(n){var i=t[n];if(void 0!==i)return i.exports;var r=t[n]={id:n,exports:{}};return e[n](r,r.exports,o),r.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.nc=void 0,(()=>{const e={data:function(){return{scrollY:window.scrollY,initialTop:15,modalElementID:"leaf_xhrDialog",modalBackgroundID:"leaf-vue-dialog-background"}},props:{hasDevConsoleAccess:{type:Number,default:0}},inject:["dialogTitle","showFormDialog","closeFormDialog","formSaveFunction","dialogButtonText"],provide:function(){return{hasDevConsoleAccess:this.hasDevConsoleAccess}},mounted:function(){var e=document.getElementById(this.modalElementID),t=e.clientHeight;document.getElementById(this.modalBackgroundID).style.minHeight=t+window.innerHeight+"px",this.makeDraggable(e)},methods:{makeDraggable:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0,o=0,n=0,i=0,r=function(r){(r=r||window.event).preventDefault(),t=n-r.clientX,o=i-r.clientY,n=r.clientX,i=r.clientY,e.style.top=e.offsetTop-o+"px",e.style.left=e.offsetLeft-t+"px",l()},a=function(){document.onmouseup=null,document.onmousemove=null},s=function(e){(e=e||window.event).preventDefault(),n=e.clientX,i=e.clientY,document.onmouseup=a,document.onmousemove=r},l=function(){e.offsetTop<window.scrollY&&(e.style.top=window.scrollY+"px"),e.offsetLeft<0&&(e.style.left="0px"),e.offsetLeft+e.clientWidth+20>window.innerWidth&&(e.style.left=window.innerWidth-e.clientWidth-20+"px")};document.getElementById(this.modalElementID+"_drag_handle")&&(document.getElementById(this.modalElementID+"_drag_handle").onmousedown=s)}},template:'<Teleport to="body">\n        <div v-if="showFormDialog" :id="showFormDialog ? \'leaf-vue-dialog-background\' : \'\'">\n            <div :id="modalElementID" class="leaf-vue-dialog" role="dialog" :style="{top: scrollY + initialTop + \'px\'}">\n                <div v-html="dialogTitle" :id="modalElementID + \'_drag_handle\'" class="leaf-vue-dialog-title"></div>\n                <div tabindex=0 @click="closeFormDialog" @keypress.enter="closeFormDialog" id="leaf-vue-dialog-close">&#10005;</div>\n                <div id="record">\n                    <div role="document" style="position: relative;">\n                        <main id="xhr" class="leaf-vue-dialog-content" role="main">\n                            <slot name="dialog-content-slot"></slot>\n                        </main>\n                    </div>\n                    <div id="leaf-vue-dialog-cancel-save">\n                        <button style="width: 90px;"\n                            id="button_save" class="btn-confirm" :title="dialogButtonText.confirm"\n                            @click="formSaveFunction">\n                            {{dialogButtonText.confirm}}\n                        </button>\n                        <button style="width: 90px;"\n                            id="button_cancelchange" class="btn-general" :title="dialogButtonText.cancel"\n                            @click="closeFormDialog">\n                            {{dialogButtonText.cancel}}\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </Teleport>'},t={data:function(){var e,t,o,n,i,r,a,s,l,c,d,u,p,m;return{initialFocusElID:"name",showShortLabel:!1,shortLabelTrigger:50,formID:this.currSubformID||this.currCategoryID,formats:{text:"Single line text",textarea:"Multi-line text",grid:"Grid (Table with rows and columns)",number:"Numeric",currency:"Currency",date:"Date",radio:"Radio (single select, multiple options)",checkbox:"Checkbox (A single checkbox)",checkboxes:"Checkboxes (Multiple Checkboxes)",multiselect:"Multi-Select Dropdown",dropdown:"Dropdown Menu (single select, multiple options)",fileupload:"File Attachment",image:"Image Attachment",orgchart_group:"Orgchart Group",orgchart_position:"Orgchart Position",orgchart_employee:"Orgchart Employee",raw_data:"Raw Data (for programmers)"},listForParentIDs:[],isLoadingParentIDs:!0,multianswerFormats:["checkboxes","radio","multiselect","dropdown"],name:(null===(e=this.ajaxIndicatorByID[this.currIndicatorID])||void 0===e?void 0:e.name)||"",options:(null===(t=this.ajaxIndicatorByID[this.currIndicatorID])||void 0===t?void 0:t.options)||[],format:(null===(o=this.ajaxIndicatorByID[this.currIndicatorID])||void 0===o?void 0:o.format)||"",description:(null===(n=this.ajaxIndicatorByID[this.currIndicatorID])||void 0===n?void 0:n.description)||"",defaultValue:(null===(i=this.ajaxIndicatorByID[this.currIndicatorID])||void 0===i?void 0:i.default)||"",required:1===parseInt(null===(r=this.ajaxIndicatorByID[this.currIndicatorID])||void 0===r?void 0:r.required)||!1,is_sensitive:1===parseInt(null===(a=this.ajaxIndicatorByID[this.currIndicatorID])||void 0===a?void 0:a.is_sensitive)||!1,parentID:null!==(s=this.ajaxIndicatorByID[this.currIndicatorID])&&void 0!==s&&s.parentID?parseInt(this.ajaxIndicatorByID[this.currIndicatorID].parentID):this.newIndicatorParentID,sort:parseInt(null===(l=this.ajaxIndicatorByID[this.currIndicatorID])||void 0===l?void 0:l.sort)||null,singleOptionValue:"checkbox"===(null===(c=this.ajaxIndicatorByID[this.currIndicatorID])||void 0===c?void 0:c.format)?this.ajaxIndicatorByID[this.currIndicatorID].options:"",multiOptionValue:["checkboxes","radio","multiselect","dropdown"].includes(null===(d=this.ajaxIndicatorByID[this.currIndicatorID])||void 0===d?void 0:d.format)?null===(u=this.ajaxIndicatorByID[this.currIndicatorID].options)||void 0===u?void 0:u.join("\n"):"",gridBodyElement:"div#container_indicatorGrid > div",gridJSON:"grid"===(null===(p=this.ajaxIndicatorByID[this.currIndicatorID])||void 0===p?void 0:p.format)?JSON.parse(null===(m=this.ajaxIndicatorByID[this.currIndicatorID])||void 0===m?void 0:m.options[0]):[],archived:!1,deleted:!1}},inject:["APIroot","CSRFToken","isEditingModal","closeFormDialog","currCategoryID","currSubformID","currIndicatorID","ajaxIndicatorByID","ajaxFormByCategoryID","selectedNodeIndicatorID","selectNewCategory","updateCategoriesProperty","newIndicatorParentID","truncateText","toggleIndicatorCountSwitch"],provide:function(){var e=this;return{gridJSON:Vue.computed((function(){return e.gridJSON})),updateGridJSON:this.updateGridJSON}},components:{GridCell:{data:function(){var e,t,o,n,i;return{name:(null===(e=this.cell)||void 0===e?void 0:e.name)||"No title",id:(null===(t=this.cell)||void 0===t?void 0:t.id)||this.makeColumnID(),gridType:(null===(o=this.cell)||void 0===o?void 0:o.type)||"text",textareaDropOptions:(null===(n=this.cell)||void 0===n||null===(i=n.options)||void 0===i?void 0:i.join("\n"))||""}},props:{cell:Object,column:Number},inject:["gridJSON","updateGridJSON"],mounted:function(){0===this.gridJSON.length&&this.updateGridJSON()},computed:{gridJSONlength:function(){return this.gridJSON.length}},methods:{makeColumnID:function(){return"col_"+(65536*(1+Math.random())|0).toString(16).substring(1)},deleteColumn:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=t.currentTarget.closest("div.cell"),n=document.getElementById("gridcell_col_parent"),i=Array.from(n.querySelectorAll("div.cell")),r=i.indexOf(o)+1,a=i.length;2===a?(o.remove(),a--,e=i[0]):(e=null===o.querySelector('[title="Move column right"]')?o.previousElementSibling.querySelector('[title="Delete column"]'):o.nextElementSibling.querySelector('[title="Delete column"]'),o.remove(),a--),document.getElementById("tableStatus").setAttribute("aria-label","column ".concat(r," removed, ").concat(a," total.")),e.focus(),this.updateGridJSON()},moveRight:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.currentTarget.closest("div.cell"),o=t.nextElementSibling,n=t.nextElementSibling.querySelector('[title="Move column right"]');o.after(t),setTimeout((function(){var e;null===(e=t.querySelector('[title="Move column '.concat(null===n?"left":"right",'"]')))||void 0===e||e.focus()}),0),document.getElementById("tableStatus").setAttribute("aria-label","Moved right to column ".concat(this.column+1," of ").concat(this.gridJSONlength)),this.updateGridJSON()},moveLeft:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.currentTarget.closest("div.cell"),o=t.previousElementSibling,n=t.previousElementSibling.querySelector('[title="Move column left"]');o.before(t),setTimeout((function(){var e;null===(e=t.querySelector('[title="Move column '.concat(null===n?"right":"left",'"]')))||void 0===e||e.focus()}),0),document.getElementById("tableStatus").setAttribute("aria-label","Moved left to column ".concat(this.column-1," of ").concat(this.gridJSONlength)),this.updateGridJSON()}},watch:{gridJSONlength:function(e,t){e>t&&document.getElementById("tableStatus").setAttribute("aria-label","Added a new column, ".concat(this.gridJSONlength," total."))}},template:'<div :id="id" class="cell">\n        <img v-if="column!==1" role="button" tabindex="0"\n            @click="moveLeft" @keypress.space.enter.prevent="moveLeft"\n            src="../../libs/dynicons/?img=go-previous.svg&w=16" \n            title="Move column left" alt="Move column left" style="cursor: pointer" />\n        <img v-if="column!==gridJSON.length" role="button" tabindex="0" \n            @click="moveRight"  @keypress.space.enter.prevent="moveRight" \n            src="../../libs/dynicons/?img=go-next.svg&w=16" \n            title="Move column right" alt="Move column right" style="cursor: pointer" /><br />\n        <span class="columnNumber">\n            <span>Column #{{column}}:</span>\n            <img v-if="gridJSON.length !==1" role="button" tabindex="0"\n            @click="deleteColumn" @keypress.space.enter.prevent="deleteColumn"\n            src="../../libs/dynicons/?img=process-stop.svg&w=16" \n            title="Delete column" alt="Delete column" />\n        </span>\n        <label :for="\'gridcell_title_\' + id">Title:</label>\n        <input type="text" v-model="name" :id="\'gridcell_title_\' + id" />\n        <label :for="\'gridcell_type_\' + id">Type:</label>\n        <select v-model="gridType" :id="\'gridcell_type_\' + id">\n            <option value="text">Single line input</option>\n            <option value="date">Date</option>\n            <option value="dropdown">Drop Down</option>\n            <option value="textarea">Multi-line text</option>\n        </select>\n        <span v-if="gridType===\'dropdown\'" class="dropdown">\n            <label for="\'gridcell_options_\' + id">One option per line</label>\n            <textarea :id="\'gridcell_options_\' + id" \n                v-model="textareaDropOptions"\n                aria-label="Dropdown options, one option per line"\n                style="width: 100%; height: 60px; resize:vertical">\n            </textarea>\n        </span>\n    </div>'}},mounted:function(){var e=this;!0===this.isEditingModal&&this.getFormParentIDs().then((function(t){e.listForParentIDs=t,e.isLoadingParentIDs=!1})),null===this.sort&&(this.sort=this.newQuestionSortValue),XSSHelpers.containsTags(this.name,["<b>","<i>","<u>","<ol>","<li>","<br>","<p>","<td>"])?($("#advNameEditor").click(),document.querySelector(".trumbowyg-editor").focus()):document.getElementById(this.initialFocusElID).focus()},computed:{isMultiOptionQuestion:function(){return this.multianswerFormats.includes(this.format)},fullFormatForPost:function(){var e=this.format;switch(this.format){case"grid":this.updateGridJSON(),e=e+"\n"+JSON.stringify(this.gridJSON);break;case"radio":case"checkboxes":case"multiselect":case"dropdown":e=e+"\n"+this.formatIndicatorMultiAnswer();break;case"checkbox":e=e+"\n"+this.singleOptionValue}return e},shortlabelCharsRemaining:function(){return 50-this.description.length},newQuestionSortValue:function(){var e="#drop_area_parent_".concat(this.parentID," > li");return null===this.parentID?this.ajaxFormByCategoryID.length:Array.from(document.querySelectorAll(e)).length}},methods:{toggleShortlabel:function(){this.showShortLabel=!this.showShortLabel},getFormParentIDs:function(){var e=this;return new Promise((function(t,o){$.ajax({type:"GET",url:"".concat(e.APIroot,"/form/_").concat(e.currCategoryID,"/flat"),success:function(e){return t(e)},error:function(e){return o(e)}})}))},preventSelectionIfFormatNone:function(){""!==this.format||!0!==this.required&&!0!==this.is_sensitive||(this.required=!1,this.is_sensitive=!1,alert('You can\'t mark a field as sensitive or required if the Input Format is "None".'))},onSave:function(){var e=this,t=document.querySelector(".trumbowyg-editor");null!=t&&(this.name=t.innerHTML);var o=[];if(this.isEditingModal){var n,i,r;console.log("updating an existing indicator: ID#",this.currIndicatorID);var a=this.name!==this.ajaxIndicatorByID[this.currIndicatorID].name,s=this.description!==this.ajaxIndicatorByID[this.currIndicatorID].description,l=null!==(n=this.ajaxIndicatorByID[this.currIndicatorID])&&void 0!==n&&n.options?"\n"+(null===(i=this.ajaxIndicatorByID[this.currIndicatorID])||void 0===i||null===(r=i.options)||void 0===r?void 0:r.join("\n")):"",c=this.fullFormatForPost!==this.ajaxIndicatorByID[this.currIndicatorID].format+l,d=this.defaultValue!==this.ajaxIndicatorByID[this.currIndicatorID].default,u=+this.required!==parseInt(this.ajaxIndicatorByID[this.currIndicatorID].required),p=+this.is_sensitive!==parseInt(this.ajaxIndicatorByID[this.currIndicatorID].is_sensitive),m=this.sort!==parseInt(this.ajaxIndicatorByID[this.currIndicatorID].sort),f=this.parentID!==this.ajaxIndicatorByID[this.currIndicatorID].parentID,h=!0===this.archived,g=!0===this.deleted;console.log(a,s,c,d,u,p,m,f,h,g),a&&o.push($.ajax({type:"POST",url:"".concat(this.APIroot,"formEditor/").concat(this.currIndicatorID,"/name"),data:{name:this.name,CSRFToken:this.CSRFToken},success:function(){return console.log("name success")},error:function(e){return console.log("ind name post err",e)}})),s&&o.push($.ajax({type:"POST",url:"".concat(this.APIroot,"formEditor/").concat(this.currIndicatorID,"/description"),data:{description:this.description,CSRFToken:this.CSRFToken},success:function(){return console.log("description success")},error:function(e){return console.log("ind desciption post err",e)}})),c&&o.push($.ajax({type:"POST",url:"".concat(this.APIroot,"formEditor/").concat(this.currIndicatorID,"/format"),data:{format:this.fullFormatForPost,CSRFToken:this.CSRFToken},success:function(){},error:function(e){return console.log("ind format post err",e)}})),d&&o.push($.ajax({type:"POST",url:"".concat(this.APIroot,"formEditor/").concat(this.currIndicatorID,"/default"),data:{default:this.defaultValue,CSRFToken:this.CSRFToken},success:function(){},error:function(e){return console.log("ind default value post err",e)}})),u&&o.push($.ajax({type:"POST",url:"".concat(this.APIroot,"formEditor/").concat(this.currIndicatorID,"/required"),data:{required:this.required?1:0,CSRFToken:this.CSRFToken},success:function(){},error:function(e){return console.log("ind required post err",e)}})),p&&o.push($.ajax({type:"POST",url:"".concat(this.APIroot,"formEditor/").concat(this.currIndicatorID,"/sensitive"),data:{is_sensitive:this.is_sensitive?1:0,CSRFToken:this.CSRFToken},success:function(){},error:function(e){return console.log("ind is_sensitive post err",e)}})),p&&1==+this.is_sensitive&&o.push($.ajax({type:"POST",url:"".concat(this.APIroot,"formEditor/formNeedToKnow"),data:{needToKnow:1,categoryID:this.formID,CSRFToken:this.CSRFToken},success:function(){e.updateCategoriesProperty(e.formID,"needToKnow",1)},error:function(e){return console.log("set form need to know post err",e)}})),h&&o.push($.ajax({type:"POST",url:"".concat(this.APIroot,"formEditor/").concat(this.currIndicatorID,"/disabled"),data:{disabled:1,CSRFToken:this.CSRFToken},success:function(){},error:function(e){return console.log("ind disabled (archive) post err",e)}})),g&&o.push($.ajax({type:"POST",url:"".concat(this.APIroot,"formEditor/").concat(this.currIndicatorID,"/disabled"),data:{disabled:2,CSRFToken:this.CSRFToken},success:function(){},error:function(e){return console.log("ind disabled (deletion) post err",e)}})),f&&this.parentID!==this.currIndicatorID&&o.push($.ajax({type:"POST",url:"".concat(this.APIroot,"formEditor/").concat(this.currIndicatorID,"/parentID"),data:{parentID:this.parentID,CSRFToken:this.CSRFToken},success:function(){},error:function(e){return console.log("ind parentID post err",e)}})),m&&o.push($.ajax({type:"POST",url:"".concat(this.APIroot,"formEditor/").concat(this.currIndicatorID,"/sort"),data:{sort:this.sort,CSRFToken:this.CSRFToken},success:function(){},error:function(e){return console.log("ind sort post err",e)}}))}else console.log("creating a new indicator on form ",this.formID),1==+this.is_sensitive&&o.push($.ajax({type:"POST",url:"".concat(this.APIroot,"formEditor/formNeedToKnow"),data:{needToKnow:1,categoryID:this.formID,CSRFToken:this.CSRFToken},success:function(){e.updateCategoriesProperty(e.formID,"needToKnow",1)},error:function(e){return console.log("set form need to know post err",e)}})),o.push($.ajax({type:"POST",url:"".concat(this.APIroot,"formEditor/newIndicator"),data:{name:this.name,format:this.fullFormatForPost,description:this.description,default:this.defaultValue,parentID:this.parentID,categoryID:this.formID,required:this.required?1:0,is_sensitive:this.is_sensitive?1:0,sort:this.newQuestionSortValue,CSRFToken:this.CSRFToken},success:function(){},error:function(e){return console.log("error posting new question",e)}}));Promise.all(o).then((function(t){if(console.log("promise all:",o,t),t.length>0){vueData.updateIndicatorList=!0;var n=!0!==e.archived&&!0!==e.deleted||e.currIndicatorID!==e.selectedNodeIndicatorID?e.selectedNodeIndicatorID:null;!0!==e.archived&&!0!==e.deleted||e.toggleIndicatorCountSwitch(),e.selectNewCategory(e.formID,null!==e.currSubformID,n)}e.closeFormDialog()}))},radioBehavior:function(e){var t=e.target.id;"archived"===t.toLowerCase()&&this.deleted&&(document.getElementById("deleted").checked=!1,this.deleted=!1),"deleted"===t.toLowerCase()&&this.archived&&(document.getElementById("archived").checked=!1,this.archived=!1)},appAddCell:function(){console.log("app added cell"),this.gridJSON.push({})},gridDropdown:function(e){var t=[];if(null!==e&&0!==e.length){var o=e.split("\n");o=(o=o.map((function(e){return e.trim()}))).map((function(e){return"no"===e?"No":e})),t=Array.from(new Set(o))}return t},updateGridJSON:function(){var e=[],t=this;$(this.gridBodyElement).find("div.cell").each((function(){var o=new Object;"undefined"===$(this).children("input:eq(0)").val()?o.name="No title":o.name=$(this).children("input:eq(0)").val(),o.id=$(this).attr("id"),o.type=$(this).find("select").val(),void 0!==o.type&&null!==o.type?"dropdown"===o.type.toLowerCase()&&(o.options=t.gridDropdown($(this).find("textarea").val().replace(/,/g,""))):o.type="textarea",e.push(o)})),this.gridJSON=e},formatIndicatorMultiAnswer:function(){var e=this.multiOptionValue.split("\n");return e=(e=e.map((function(e){return e.trim()}))).map((function(e){return"no"===e?"No":e})),Array.from(new Set(e)).join("\n")},advNameEditorClick:function(){$("#advNameEditor").css("display","none"),$("#rawNameEditor").css("display","block"),$("#name").trumbowyg({resetCss:!0,btns:["formatting","bold","italic","underline","|","unorderedList","orderedList","|","link","|","foreColor","|","justifyLeft","justifyCenter","justifyRight"]}),$(".trumbowyg-box").css({"min-height":"130px","max-width":"700px",margin:"0.5rem 0"}),$(".trumbowyg-editor, .trumbowyg-texteditor").css({"min-height":"100px",height:"100px",padding:"1rem"})},rawNameEditorClick:function(){$("#advNameEditor").css("display","block"),$("#rawNameEditor").css("display","none"),$("#name").trumbowyg("destroy")}},template:'<div id="indicator-editing-dialog-content">\n        <div>\n            <label for="name">Field Name</label>\n            <textarea id="name" v-model="name" rows="4">{{name}}</textarea>\n            <div style="display:flex; justify-content: space-between; font-size: 80%;">\n                <button class="btn-general" id="rawNameEditor"\n                    title="use basic text editor"\n                    @click="rawNameEditorClick" style="display: none; width:135px">\n                    Show formatted code\n                </button>\n                <button class="btn-general" id="advNameEditor"\n                    title="use advanced text editor" style="width:135px"\n                    @click="advNameEditorClick">\n                    Advanced Formatting\n                </button>\n                <button v-if="name.length <= shortLabelTrigger && description===\'\'" \n                    class="btn-general" \n                    style="margin-left: auto; width:135px"\n                    title="access short label field"\n                    @click="toggleShortlabel">\n                    {{showShortLabel ? \'Hide\' : \'Use\'}} Short Label\n                </button>\n            </div>\n        </div>\n        <div id="non-name-wrapper">\n            <div v-if="description!==\'\' || name.length > shortLabelTrigger || showShortLabel===true">\n                <div style="display: flex; justify-content: space-between; align-items: center;">\n                    <label for="description">What would you call this field in a spreadsheet?</label>\n                    <div>{{shortlabelCharsRemaining}}</div>\n                </div>\n                <input type="text" id="description" v-model="description" maxlength="50" />\n            </div>\n            <div>\n                <div>\n                    <label for="indicatorType">Input Format</label><br/>\n                    <div style="display:flex;">\n                        <select id="indicatorType" title="Select a Format" v-model="format" @change="preventSelectionIfFormatNone">\n                            <option value="">None</option>\n                            <option v-for="kv in Object.entries(formats)" \n                            :value="kv[0]" :selected="kv[0]===format" :key="kv[0]">{{ kv[1] }}</option>\n                        </select>\n                        <button id="editing-format-assist" class="btn-general"\n                            title="select for assistance with format choices">\n                            ℹ\n                        </button>\n                    </div>\n                </div>\n                <div v-if="format===\'checkbox\'" id="container_indicatorSingleAnswer" style="margin-top:0.5rem;">\n                    <label for="indicatorSingleAnswer">Text for checkbox:</label><br/> \n                    <input type="text" id="indicatorSingleAnswer" v-model="singleOptionValue"/>\n                </div>\n                <div v-if="isMultiOptionQuestion" id="container_indicatorMultiAnswer" style="margin-top:0.5rem;">\n                    <label for="indicatorMultiAnswer">One option per line:</label><br/>\n                    <textarea id="indicatorMultiAnswer" v-model="multiOptionValue" style="height: 130px;">\n                    </textarea>\n                </div>\n                <div v-if="format===\'grid\'" id="container_indicatorGrid">\n                    <span id="tableStatus" style="position: absolute; color: transparent" \n                        aria-atomic="true" aria-live="polite"  role="status"></span>\n                    <br/>\n                    <button class="buttonNorm" id="addColumnBtn" title="Add column" alt="Add column" aria-label="grid input add column" \n                        @click="appAddCell">\n                        ➕ Add column\n                    </button>\n                    <br/><br/>\n                    Columns ({{gridJSON.length}}):\n                    <div style="overflow-x: scroll;" id="gridcell_col_parent">\n                        <grid-cell v-if="gridJSON.length===0" :column="1" :cell="new Object()" key="initial_cell"></grid-cell>\n                        <grid-cell v-for="(c,i) in gridJSON" :column="i+1" :cell="c" :key="c.id"></grid-cell>\n                    </div>\n                </div>\n                <div style="margin-top:0.75rem;">\n                    <label for="defaultValue">Default Answer</label><br/>\n                    <textarea id="defaultValue" v-model="defaultValue"></textarea> \n                </div>\n            </div>\n            <fieldset id="indicator-editing-attributes">\n                <legend style="font-family:\'PublicSans-Bold\';">Attributes</legend>\n                <div class="attribute-row">\n                    <div style="display: flex; align-items: center; margin-right: 1rem;">\n                        <label class="checkable leaf_check" for="required">\n                            <input type="checkbox" id="required" v-model="required" name="required" class="icheck leaf_check"  \n                                @change="preventSelectionIfFormatNone" />\n                            <span class="leaf_check"></span>Required\n                        </label>\n                    </div>\n                    <div style="display: flex; align-items: center; margin-right: 1.5rem;">\n                        <label class="checkable leaf_check" for="sensitive">\n                            <input type="checkbox" id="sensitive" v-model="is_sensitive" name="sensitive" class="icheck leaf_check"  \n                                @change="preventSelectionIfFormatNone" />\n                            <span class="leaf_check"></span>Sensitive Data (PHI/PII)\n                        </label>\n                    </div>\n                    <div v-if="!isEditingModal" style="display: flex; align-items: center;">\n                        <input id="sort" v-model.number="sort" name="sort" type="number" style="width: 50px; padding: 0; margin-right:3px" />\n                        <label for="sort">Sort Priority</label> \n                    </div>\n                    <div v-if="isEditingModal" style="margin: 0 1rem 0 1.25rem;">\n                        <label class="checkable leaf_check" for="archived">\n                            <input type="checkbox" id="archived" name="disable_or_delete" class="icheck leaf_check"  \n                                v-model="archived" @change="radioBehavior" />\n                            <span class="leaf_check"></span>Archive\n                        </label>\n                    </div>\n                    <div v-if="isEditingModal">\n                        <label class="checkable leaf_check" for="deleted">\n                            <input type="checkbox" id="deleted" name="disable_or_delete" class="icheck leaf_check"  \n                                v-model="deleted" @change="radioBehavior" />\n                            <span class="leaf_check"></span>Delete\n                        </label>\n                    </div>\n                </div>\n                <template v-if="isEditingModal">\n                    <div class="attribute-row" style="margin-bottom: 0.5rem;">\n                        <div v-if="isLoadingParentIDs===false" style="display: flex; align-items: center; margin-right: 1.25rem;">\n                            <select v-model.number="parentID" id="container_parentID" style="width:230px; margin-right: 3px">\n                                <option :value="null" :selected="parentID===null">None</option> \n                            <template v-for="kv in Object.entries(listForParentIDs)">\n                                <option v-if="currIndicatorID !== parseInt(kv[0])" \n                                    :value="kv[0]" \n                                    :key="\'parent\'+kv[0]">\n                                    {{kv[0]}}: {{truncateText(kv[1][\'1\'].name)}}\n                                </option>\n                            </template>\n                            </select>\n                            <label for="container_parentID">Parent Question ID</label>\n                        </div>\n                        <div style="display: flex; align-items: center;">\n                            <input id="sort" v-model.number="sort" name="sort" type="number" style="width: 50px; padding: 0; margin-right:3px" />\n                            <label for="sort">Sort Priority</label> \n                        </div>\n                    </div>\n                </template>\n            </fieldset>\n            <span v-show="archived" id="archived-warning">\n                This field will be archived.  It can be re-enabled by using Restore Fields.\n            </span>\n            <span v-show="deleted" id="deletion-warning">\n                Deleted items can only be re-enabled within 30 days by using Restore Fields.\n            </span>\n        </div>\n    </div>'},n={data:function(){return{initialFocusElID:"TODO:",left:"{{",right:"}}",formID:this.currSubformID||this.currCategoryID,codeEditorHtml:{},codeEditorHtmlPrint:{},html:null===this.ajaxIndicatorByID[this.currIndicatorID].html?"":this.ajaxIndicatorByID[this.currIndicatorID].html,htmlPrint:null===this.ajaxIndicatorByID[this.currIndicatorID].htmlPrint?"":this.ajaxIndicatorByID[this.currIndicatorID].htmlPrint}},inject:["APIroot","CSRFToken","closeFormDialog","currCategoryID","currSubformID","currIndicatorID","ajaxIndicatorByID","selectNewCategory","hasDevConsoleAccess","selectedNodeIndicatorID"],mounted:function(){console.log("Advanced Options mounted",this.currIndicatorID,this.formID),1===parseInt(this.hasDevConsoleAccess)&&this.setupAdvancedOptions()},methods:{setupAdvancedOptions:function(){var e=this;this.codeEditorHtml=CodeMirror.fromTextArea(document.getElementById("html"),{mode:"htmlmixed",lineNumbers:!0,extraKeys:{F11:function(e){e.setOption("fullScreen",!e.getOption("fullScreen"))},Esc:function(e){e.getOption("fullScreen")&&e.setOption("fullScreen",!1)},"Ctrl-S":function(t){e.saveCodeHTML()}}}),this.codeEditorHtmlPrint=CodeMirror.fromTextArea(document.getElementById("htmlPrint"),{mode:"htmlmixed",lineNumbers:!0,extraKeys:{F11:function(e){e.setOption("fullScreen",!e.getOption("fullScreen"))},Esc:function(e){e.getOption("fullScreen")&&e.setOption("fullScreen",!1)},"Ctrl-S":function(t){e.saveCodeHTMLPrint()}}}),$(".CodeMirror").css("border","1px solid black")},saveCodeHTML:function(){var e=this,t=this.codeEditorHtml.getValue();$.ajax({type:"POST",url:"".concat(this.APIroot,"formEditor/").concat(this.currIndicatorID,"/html"),data:{html:t,CSRFToken:this.CSRFToken},success:function(){e.html=t;var o=(new Date).toLocaleTimeString();document.getElementById("codeSaveStatus_html").innerHTML="<br /> Last saved: "+o,e.selectNewCategory(e.formID,null!==e.currSubformID,e.selectedNodeIndicatorID)},error:function(e){return console.log(e)}})},saveCodeHTMLPrint:function(){var e=this,t=this.codeEditorHtmlPrint.getValue();$.ajax({type:"POST",url:"".concat(this.APIroot,"formEditor/").concat(this.currIndicatorID,"/htmlPrint"),data:{htmlPrint:t,CSRFToken:this.CSRFToken},success:function(){e.htmlPrint=t;var o=(new Date).toLocaleTimeString();document.getElementById("codeSaveStatus_htmlPrint").innerHTML="<br /> Last saved: "+o,e.selectNewCategory(e.formID,null!==e.currSubformID,e.selectedNodeIndicatorID)},error:function(e){return console.log(e)}})},onSave:function(){var e=this;console.log("clicked advanced options save");var t=[],o=this.html!==this.codeEditorHtml.getValue(),n=this.htmlPrint!==this.codeEditorHtmlPrint.getValue();console.log("dHTML, dHTMLP",o,n),o&&t.push($.ajax({type:"POST",url:"".concat(this.APIroot,"formEditor/").concat(this.currIndicatorID,"/html"),data:{html:this.codeEditorHtml.getValue(),CSRFToken:this.CSRFToken},success:function(){},error:function(e){return console.log("ind html post err",e)}})),n&&t.push($.ajax({type:"POST",url:"".concat(this.APIroot,"formEditor/").concat(this.currIndicatorID,"/htmlPrint"),data:{htmlPrint:this.codeEditorHtmlPrint.getValue(),CSRFToken:this.CSRFToken},success:function(){},error:function(e){return console.log("ind htmlPrint post err",e)}})),Promise.all(t).then((function(o){console.log("promise all:",t,o),e.closeFormDialog(),o.length>0&&e.selectNewCategory(e.formID,null!==e.currSubformID,e.selectedNodeIndicatorID)}))}},template:'<div v-if="parseInt(hasDevConsoleAccess)===1">\n            <fieldset id="advanced" style="min-width: 700px; padding: 0.5em; margin:0"><legend>Template Variables and Controls</legend>\n                <table class="table" style="border-collapse: collapse; margin: 0; width: 100%;">\n                    <tr>\n                        <td><b>{{ left }} iID {{ right }}</b></td>\n                        <td>The indicatorID # of the current data field.</td>\n                        <td><b>Ctrl-S</b></td>\n                        <td>Save the focused section</td>\n                    </tr>\n                    <tr>\n                        <td><b>{{ left }} recordID {{ right }}</b></td>\n                        <td>The record ID # of the current request.</td>\n                        <td><b>F11</b></td>\n                        <td>Toggle Full Screen mode for the focused section</td>\n                    </tr>\n                    <tr>\n                        <td><b>{{ left }} data {{ right }}</b></td>\n                        <td>The contents of the current data field as stored in the database.</td>\n                        <td><b>Esc</b></td>\n                        <td>Escape Full Screen mode</td>\n                    </tr>\n                </table><br />\n                <div style="display:flex; justify-content: space-between;">\n                    html (for pages where the user can edit data): \n                    <button id="btn_codeSave_html" @click="saveCodeHTML" class="buttonNorm" title="Save Code">\n                        <img id="saveIndicator" src="../../libs/dynicons/?img=media-floppy.svg&w=16" alt="Save" />\n                        Save Code<span id="codeSaveStatus_html"></span>\n                    </button>\n                </div>\n                <textarea id="html">{{html}}</textarea><br />  \x3c!-- NOTE: can\'t seem to v-model these areas html and htmlPrint properties updated after save --\x3e\n                <div style="display:flex; justify-content: space-between;">\n                    htmlPrint (for pages where the user can only read data): \n                    <button id="btn_codeSave_htmlPrint" @click="saveCodeHTMLPrint" class="buttonNorm" title="Save Code">\n                        <img id="saveIndicator" src="../../libs/dynicons/?img=media-floppy.svg&w=16" alt="Save" />\n                        Save Code<span id="codeSaveStatus_htmlPrint"></span>\n                    </button>\n                </div>\n                <textarea id="htmlPrint">{{htmlPrint}}</textarea>\n            </fieldset>\n        </div>\n        <div v-else style="height:50px; margin: 1em 0;">\n            Notice: Please go to <b>Admin Panel → LEAF Programmer</b> to ensure continued access to this area.\n        </div>'},i={data:function(){return{categoryName:"",categoryDescription:""}},inject:["APIroot","CSRFToken","currCategoryID","addNewCategory","selectNewCategory","closeFormDialog"],mounted:function(){document.getElementById("name").focus()},computed:{isSubform:function(){return null!==this.currCategoryID},nameCharsRemaining:function(){return Math.max(50-this.categoryName.length,0)},descrCharsRemaining:function(){return Math.max(255-this.categoryDescription.length,0)}},methods:{onSave:function(){var e=this;console.log("clicked save for new form modal"),$.ajax({type:"POST",url:"".concat(this.APIroot,"formEditor/new"),data:{name:this.categoryName,description:this.categoryDescription,parentID:this.currCategoryID||"",CSRFToken:this.CSRFToken},success:function(t){var o=t,n={};n.categoryID=o,n.categoryName=e.categoryName,n.categoryDescription=e.categoryDescription,n.workflowID=0,n.needToKnow=0,n.parentID=e.currCategoryID||"",e.addNewCategory(o,n),e.selectNewCategory(o,e.isSubform),e.closeFormDialog()},error:function(e){console.log("error posting new form",e),reject(e)}})}},template:'<div>\n            <div style="display: flex; justify-content: space-between; padding: 0.25em 0">\n                <div><b>Form Name</b><span style="font-size:80%"> (up to 50 characters)</span></div>\n                <div>{{nameCharsRemaining}}</div>\n            </div>\n            <input id="name" type="text" maxlength="50" v-model="categoryName" style="width: 100%;" />\n            <div style="display: flex; justify-content: space-between; padding: 0.25em 0; margin-top: 1em;">\n                <div><b>Form Description</b><span style="font-size:80%"> (up to 255 characters)</span></div>\n                <div>{{descrCharsRemaining}}</div>\n            </div>\n            <textarea id="description" maxlength="255" v-model="categoryDescription" \n                style="width: 100%; height: 90px;">\n            </textarea>\n        </div>'},r={data:function(){return{initialFocusElID:"formPacket",files:null}},inject:["APIroot","CSRFToken","closeFormDialog","selectNewCategory"],mounted:function(){document.getElementById(this.initialFocusElID).focus()},methods:{onSave:function(){var e=this;if(null!==this.files){var t=new FormData;t.append("formPacket",this.files[0]),t.append("CSRFToken",this.CSRFToken),$.ajax({type:"POST",url:"".concat(this.APIroot,"formStack/import"),processData:!1,contentType:!1,cache:!1,data:t,success:function(t){!0===t?console.log("form import success"):console.log(t),e.closeFormDialog(),e.selectNewCategory(null)},error:function(e){return console.log("form import error",e)}})}else console.log("no attachment")},attachForm:function(e){var t=e.target.files||e.dataTransfer.files;t.length>0&&(this.files=t)}},template:'\n            <div id="file_control" style="margin-bottom: 1em;">\n                <p>Select LEAF Form Packet to import:</p>\n                <input id="formPacket" name="formPacket" type="file" @change="attachForm"/>\n            </div>'},a={data:function(){return{divSaveCancelID:"leaf-vue-dialog-cancel-save",page:1,formID:this.currSubformID||this.currCategoryID,ajaxRes:""}},inject:["currSubformID","currCategoryID"],mounted:function(){document.getElementById(this.divSaveCancelID).style.display="none",this.getPage()},computed:{showNext:function(){return-1===this.ajaxRes.indexOf("No history to show")},showPrev:function(){return this.page>1}},methods:{getNext:function(){this.page++,this.getPage()},getPrev:function(){this.page--,this.getPage()},getPage:function(){var e=this;$.ajax({type:"GET",url:"ajaxIndex.php?a=gethistory&type=form&gethistoryslice=1&page=".concat(this.page,"&id=").concat(this.formID),dataType:"text",success:function(t){e.ajaxRes=t},error:function(e){return console.log(e)},cache:!1})}},template:'<div id="history-slice" v-html="ajaxRes" style="min-height: 100px; min-width: 300px;"></div>\n        <div id="history-page-buttons" style="display: flex; justify-content: space-between;">\n            <button v-if="showPrev" id="prev" \n                class="btn-general"\n                style="width: 125px;"\n                @click="getPrev" title="get previous page">\n                Previous page\n            </button>\n            <button v-if="showNext" id="next" \n                class="btn-general"\n                style="width: 125px; margin-left: auto;"\n                @click="getNext" title="get next page">\n                Next page\n            </button>\n        </div>'};function s(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function l(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const c={data:function(){return{catIDtoStaple:"",formID:this.currSubformID||this.currCategoryID}},inject:["APIroot","CSRFToken","truncateText","categories","currCategoryID","currSubformID","ajaxSelectedCategoryStapled","getStapledFormsByCurrentCategory","setCurrCategoryStaples","closeFormDialog","updateFormsStapledCatIDs"],mounted:function(){document.getElementById("select-form-to-staple").focus()},computed:{mergeableForms:function(){var e=this,t=[],o=function(o){var n=parseInt(e.categories[o].workflowID),i=e.categories[o].categoryID,r=e.categories[o].parentID,a=e.ajaxSelectedCategoryStapled.every((function(e){return e.stapledCategoryID!==i}));0===n&&i!==e.formID&&""===r&&a&&t.push(function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?s(Object(o),!0).forEach((function(t){l(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},e.categories[o]))};for(var n in this.categories)o(n);return t}},methods:{unmergeForm:function(e){var t=this;$.ajax({type:"DELETE",url:"".concat(this.APIroot,"formEditor/_").concat(this.formID,"/stapled/_").concat(e,"?")+$.param({CSRFToken:this.CSRFToken}),success:function(o){t.getStapledFormsByCurrentCategory(t.formID).then((function(e){return t.setCurrCategoryStaples(e)})),t.updateFormsStapledCatIDs(e,!0)},error:function(e){return console.log(e)}})},onSave:function(){var e=this;""!==this.catIDtoStaple&&$.ajax({type:"POST",url:"".concat(this.APIroot,"formEditor/_").concat(this.formID,"/stapled"),data:{CSRFToken:this.CSRFToken,stapledCategoryID:this.catIDtoStaple},success:function(t){1!==t?alert(t):e.getStapledFormsByCurrentCategory(e.formID).then((function(t){e.setCurrCategoryStaples(t),e.updateFormsStapledCatIDs(e.catIDtoStaple)}))},error:function(e){return console.log(e)},cache:!1})}},template:'<div>\n        <p>Stapled forms will show up on the same page as the primary form</p>\n        <div id="mergedForms">\n            <ul style="list-style-type:none; padding: 0; min-height: 50px;">\n                <li v-for="s in ajaxSelectedCategoryStapled">\n                    {{truncateText(s.categoryName) || \'Untitled\'}}\n                    <button \n                        style="margin-left: 0.25em; background-color: transparent; color:#a00; padding: 0.1em 0.2em; border: 0; border-radius:3px;" \n                        @click="unmergeForm(s.categoryID)" :title="\'remove \' + s.categoryName || \'Untitled\'">\n                        <b>[ Remove ]</b>\n                    </button>\n                </li>\n            </ul>\n        </div><hr/>\n        <div style="min-height: 50px; margin: 1em 0;">\n            <template v-if="mergeableForms.length > 0">\n                <label for="select-form-to-staple" style="margin-bottom: 0.2em;">Select a form to merge</label>\n                <select v-model="catIDtoStaple" title="select a form to merge" id="select-form-to-staple">\n                    <option value="">Select a Form</option>\n                    <option v-for="f in mergeableForms" :value="f.categoryID" :key="\'staple_\'+f.categoryID">{{truncateText(f.categoryName) || \'Untitled\'}}</option>\n                </select>\n            </template>\n            <div v-else>There are no available forms to merge</div>\n        </div>\n    </div>'},d={data:function(){return{formID:this.currSubformID||this.currCategoryID,group:"",groups:[],collaborators:[]}},inject:["APIroot","CSRFToken","categories","currCategoryID","currSubformID","closeFormDialog","openEditCollaboratorsDialog"],beforeMount:function(){var e=this;$.ajax({type:"GET",url:"".concat(this.APIroot,"system/groups"),success:function(t){e.groups=t;var o=document.getElementById("selectFormCollaborators");null!==o&&o.focus()},error:function(e){return console.log(e)},cache:!1}),$.ajax({type:"GET",url:"".concat(this.APIroot,"formEditor/_").concat(this.formID,"/privileges"),success:function(t){e.collaborators=t},error:function(e){return console.log(e)},cache:!1})},methods:{removePermission:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;$.ajax({type:"POST",url:"".concat(this.APIroot,"formEditor/_").concat(this.formID,"/privileges"),data:{CSRFToken:this.CSRFToken,groupID:t,read:0,write:0},success:function(o){console.log(o),e.collaborators=e.collaborators.filter((function(e){return parseInt(e.groupID)!==t}))},error:function(e){return console.log(e)}})},formNameStripped:function(){var e=this.categories[this.formID].categoryName;return XSSHelpers.stripAllTags(e)||"Untitled"},onSave:function(){var e=this;""!==this.group&&$.ajax({type:"POST",url:"".concat(this.APIroot,"formEditor/_").concat(this.formID,"/privileges"),data:{CSRFToken:this.CSRFToken,groupID:parseInt(this.group.groupID),read:1,write:1},success:function(t){void 0===e.collaborators.find((function(t){return parseInt(t.groupID)===parseInt(e.group.groupID)}))&&e.collaborators.push({groupID:e.group.groupID,name:e.group.name})},error:function(e){return console.log(e)},cache:!1})}},template:'<div>\n        <h3>{{formNameStripped()}}</h3>\n        <p>Collaborators have access to fill out data fields at any time in the workflow.</p>\n        <p>This is typically used to give groups access to fill out internal-use fields.</p>\n        <div id="formPrivs">\n            <template v-if="collaborators.length > 0">\n                <ul style="list-style-type:none; padding: 0; min-height: 30px;">\n                    <li v-for="c in collaborators" :key="c.name + c.groupID">\n                        {{c.name}}\n                        <button \n                            style="margin-left: 0.25em; background-color: transparent; color:#a00; padding: 0.1em 0.2em; border: 0; border-radius:3px;" \n                            @click="removePermission(parseInt(c.groupID))" :title="\'remove \' + c.name">\n                            <b>[ Remove ]</b>\n                        </button>\n                    </li>\n                </ul>\n            </template>\n        </div><hr/>\n        <div style="min-height: 50px; margin: 1em 0;">\n            <template v-if="groups.length > 0">\n                <label for="selectFormCollaborators" style="display:block; margin-bottom:2px;">Select a group to add</label>\n                <select v-model="group" id="selectFormCollaborators">\n                    <option value="">Select a Group</option>\n                    <option v-for="g in groups" :value="g" :key="\'group_\' + g.groupID">{{g.name}}</option>\n                </select>\n            </template>\n            <div v-else>There are no available groups to add</div>\n        </div>\n    </div>'},u={data:function(){return{formID:this.currSubformID||this.currCategoryID}},inject:["APIroot","CSRFToken","currCategoryID","currSubformID","currentCategorySelection","ajaxSelectedCategoryStapled","selectNewCategory","closeFormDialog"],computed:{formName:function(){return XSSHelpers.stripAllTags(this.currentCategorySelection.categoryName)},formDescription:function(){return XSSHelpers.stripAllTags(this.currentCategorySelection.categoryDescription)}},methods:{onSave:function(){var e=this;0===this.ajaxSelectedCategoryStapled.length?$.ajax({type:"DELETE",url:"".concat(this.APIroot,"formStack/_").concat(this.formID,"?")+$.param({CSRFToken:this.CSRFToken}),success:function(t){!0!==t?alert(t):(e.closeFormDialog(),e.selectNewCategory(null))}}):alert("Please remove all stapled forms before deleting.")}},template:'<div>\n        <div>Are you sure you want to delete this form?</div>\n        <div style="margin: 1em 0;"><b>{{formName}}</b></div>\n        <div style="min-width:300px; max-width: 500px; min-height: 50px; margin-bottom: 1rem;">{{formDescription}}</div>\n        <div v-if="ajaxSelectedCategoryStapled.length > 0">⚠️ This form still has stapled forms attached</div>\n    </div>'};function p(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function m(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?p(Object(o),!0).forEach((function(t){f(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):p(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function f(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const h={data:function(){return{menuOpen:!1,menuPinned:!1,internalFormsMenuOpen:!1}},inject:["APIroot","truncateText","selectNewCategory","categories","currCategoryID","ajaxSelectedCategoryStapled","restoringFields","showRestoreFields","openNewFormDialog","openImportFormDialog","openFormHistoryDialog","openStapleFormsDialog","openConfirmDeleteFormDialog"],computed:{internalForms:function(){var e=[];for(var t in this.categories)if(this.categories[t].parentID===this.currCategoryID){var o=m({},this.categories[t]);e.push(o)}return e}},methods:{toggleMenu:function(){this.menuPinned=!this.menuPinned,this.menuOpen=this.menuPinned},showMenu:function(){this.menuOpen=!0},hideMenu:function(){this.menuPinned||(this.menuOpen=!1)},showInternalFormsMenu:function(){this.internalFormsMenuOpen=!0},hideInternalFormsMenu:function(){this.internalFormsMenuOpen=!1},exportForm:function(){var e=this,t=this.currCategoryID,o={form:{},subforms:{}},n=[];n.push($.ajax({type:"GET",url:"".concat(this.APIroot,"form/_").concat(t,"/export"),success:function(e){o.form=e,o.categoryID=t},error:function(e){return console.log(e)}})),this.internalForms.forEach((function(t){var i=t.categoryID;n.push($.ajax({type:"GET",url:"".concat(e.APIroot,"form/_").concat(i,"/export"),success:function(e){o.subforms[i]={},o.subforms[i].name=t.categoryName,o.subforms[i].description=t.categoryDescription,o.subforms[i].packet=e}}))})),n.push($.ajax({type:"GET",url:"".concat(this.APIroot,"form/_").concat(t,"/workflow"),success:function(e){o.workflowID=e[0].workflowID}})),Promise.all(n).then((function(){var n={version:1};n.name=e.categories[t].categoryName+" (Copy)",n.description=e.categories[t].categoryDescription,n.packet=o;var i=new Blob([JSON.stringify(n).replace(/[^ -~]/g,"")],{type:"text/plain"});saveAs(i,"LEAF_FormPacket_"+t+".txt")}))},selectMainForm:function(){console.log("clicked main form",this.currCategoryID),this.selectNewCategory(this.currCategoryID,!1)},selectSubform:function(e){console.log("clicked subform","sub",e,"main",this.currCategoryID),this.selectNewCategory(e,!0)},shortFormNameStripped:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:21,o=e||"Untitled";return o=XSSHelpers.stripAllTags(o),this.truncateText(o,t).trim()}},template:'<header id="form-editor-header">\n        <nav>\n            <ul>\n                <li>\n                    <button type="button"\n                        :title="(menuPinned ? \'close \' : \'pin \') + \'menu\'"\n                        id="form-editor-menu-toggle" \n                        @click="toggleMenu" @mouseenter="showMenu">\n                        <span>{{menuPinned ? \'↡\' : menuOpen ? \'⭱\' : \'⭳\'}}</span>menu\n                    </button>\n                \n                    <template v-if="menuOpen">\n                        <ul v-if="currCategoryID===null" id="form-editor-menu"\n                            @mouseenter="showMenu" @mouseleave="hideMenu">\n                            <li>\n                                <a href="#" id="createFormButton" @click="openNewFormDialog">\n                                Create Form<span>📄</span>\n                                </a>\n                            </li>\n                            <li>\n                                <a href="#" @click="openImportFormDialog">\n                                Import Form<span>📦</span>\n                                </a>\n                            </li>\n                            <li>\n                                <a href="#" @click="showRestoreFields">\n                                Restore Fields<span>♻️</span>\n                                </a>\n                            </li>\n                            <li>\n                                <a href="./?a=formLibrary">\n                                LEAF Library<span>📘</span>\n                                </a>\n                            </li>\n                        </ul>\n                        <ul v-else id="form-editor-menu"\n                            @mouseenter="showMenu" \n                            @mouseleave="hideMenu">\n                            <li>\n                                <a href="#" @click="openNewFormDialog" title="add new internal use form">\n                                Add Internal-Use<span>➕</span>\n                                </a>\n                            </li>\n                            <li>\n                                <a href="#" @click="openStapleFormsDialog" title="staple another form">\n                                Edit Stapled Forms<span>📌</span>\n                                </a>\n                                <ul>\n                                    <li v-for="s in ajaxSelectedCategoryStapled" \n                                        :key="\'staple_\' + s.stapledCategoryID"\n                                        class="stapled-form">\n                                        <a href="#">{{shortFormNameStripped(s.categoryName, 21) || \'Untitled\'}}<span>📑</span></a>\n                                    </li>\n                                </ul>\n                            </li>\n                            <li>\n                                <a href="#" @click="openFormHistoryDialog" title="view form history">\n                                View History<span>🕗</span>\n                                </a>\n                            </li>\n                            <li>\n                                <a href="#" @click="exportForm" title="export form">\n                                Export Form<span>💾</span>\n                                </a>\n                            </li>\n                            <li>\n                                <a href="#" @click="openConfirmDeleteFormDialog" title="delete this form">\n                                Delete this form<span>❌</span>\n                                </a>\n                            </li>\n                        </ul>\n                    </template>\n                </li>\n                \n                <li>\n                    <button type="button" @click="selectNewCategory(null)" title="View All Forms">\n                        <h2><span class="header-icon">🗃️</span>Form Editor</h2>\n                    </button>\n                    <span v-if="currCategoryID!==null" class="header-arrow">❯</span>\n                </li>\n                \n                <template v-if="currCategoryID!==null">\n                    <li>\n                        <button type="button" :id="currCategoryID" @click="selectMainForm" title="main form">\n                            <h2><span class="header-icon">📂</span>{{shortFormNameStripped(categories[currCategoryID].categoryName, 26)}}</h2>\n                        </button>\n                        <span v-if="internalForms.length > 0" class="header-arrow">❯</span>\n                    </li>\n                </template>\n                \n                <template v-if="internalForms.length > 0">\n                    <li>\n                        <button type="button" \n                            @mouseenter="showInternalFormsMenu">\n                            <h2><span class="header-icon">📋</span>Internal Forms</h2>\n                        </button>\n                        <ul v-if="internalFormsMenuOpen" id="internalForms" @mouseleave="hideInternalFormsMenu">\n                            <li v-for="i in internalForms" :key="i.categoryID">\n                                <a href="#" :id="i.categoryID" @click="selectSubform(i.categoryID)" title="select internal form">\n                                {{shortFormNameStripped(i.categoryName, 28)}}\n                                </a>\n                            </li>\n                        </ul>\n                    </li>\n                </template>\n            </ul>\n        </nav>\n        \n    </header>'},g={data:function(){return{staples:[]}},props:{categoriesRecord:Object},inject:["selectNewCategory","getStapledFormsByCurrentCategory","truncateText","formsStapledCatIDs","updateFormsStapledCatIDs"],mounted:function(){var e=this;this.getStapledFormsByCurrentCategory(this.catID).then((function(t){for(var o in e.staples=t,t)e.updateFormsStapledCatIDs(t[o].stapledCategoryID)}))},computed:{workflowID:function(){return parseInt(this.categoriesRecord.workflowID)},cardLibraryClasses:function(){return"formPreview formLibraryID_".concat(this.categoriesRecord.formLibraryID)},catID:function(){return this.categoriesRecord.categoryID},staplesList:function(){var e=[];return this.staples.forEach((function(t){e.push(t.categoryID)})),e.join(", ")},isStapledToOtherForm:function(){return this.formsStapledCatIDs.includes(this.categoriesRecord.categoryID)},categoryName:function(){var e=""===this.categoriesRecord.categoryName?"Untitled":XSSHelpers.stripAllTags(this.categoriesRecord.categoryName);return this.truncateText(e,41)},formDescription:function(){return XSSHelpers.stripAllTags(this.categoriesRecord.categoryDescription)},availability:function(){return 1===parseInt(this.categoriesRecord.visible)&&this.workflowID>0?"This form is available":"Hidden. Users cannot submit new requests."},workflow:function(){var e;return e=0===this.workflowID?"No Workflow":null!==this.categoriesRecord.description?"Workflow: "+this.categoriesRecord.description:"",this.truncateText(e,43)}},template:'<div tabindex="0" \n        @click="selectNewCategory(catID)"\n        @keyup.enter="selectNewCategory(catID)"\n        :class="cardLibraryClasses" class="browser-category-card"\n        :id="catID" \n        :title="catID + \': \' + categoryName + (staplesList ? \'. Stapled with: \' + staplesList : \'\') + (isStapledToOtherForm ? \'. This form is stapled to another\' : \'\')">\n            <div class="formPreviewTitle" style="position: relative">{{categoryName}}\n                <img v-if="parseInt(categoriesRecord.needToKnow) === 1" src="../../libs/dynicons/?img=emblem-readonly.svg&w=16" alt="" \n                title="Need to know mode enabled" style="position: absolute; top: 4px; right: 4px;"/>\n            </div>\n            <div class="formPreviewDescription" v-html="formDescription"></div>\n            <div style="display: flex; justify-content: space-between;">\n                <div class="formPreviewStatus">{{ availability }}</div>\n                <div v-if="staples.length > 0"\n                    :title="\'This form has stapled forms: \' + staplesList"\n                >📌</div>\n                <div v-if="isStapledToOtherForm"\n                    title="This form is stapled to another form"\n                >📑</div>\n            </div>\n            <div class="formPreviewWorkflow">{{ workflow }}</div>\n        </div>'},v={props:{indicator:Object},inject:["orgchartPath","addOrgSelector","orgSelectorClassesAdded","updateGridInstances","gridInstances"],computed:{truncatedOptions:function(){var e;return(null===(e=this.indicator.options)||void 0===e?void 0:e.slice(0,5))||[]},baseFormat:function(){var e,t;return(null===(e=this.indicator.format)||void 0===e||null===(t=e.toLowerCase())||void 0===t?void 0:t.trim())||""},inputElID:function(){return"input_preview_".concat(this.indicator.indicatorID)},selectorInputPrefix:function(){return"orgchart_group"===this.baseFormat?"group#":"#"},selType:function(){return this.baseFormat.slice(this.baseFormat.indexOf("_")+1)},labelSelector:function(){return this.indicator.indicatorID+"_format_label"},printResponseID:function(){return"xhrIndicator_".concat(this.indicator.indicatorID,"_").concat(this.indicator.series)}},mounted:function(){var e,t,o=this;switch(this.baseFormat){case"raw_data":break;case"date":$("#".concat(this.inputElID)).datepicker({autoHide:!0,showAnim:"slideDown",onSelect:function(){$("#"+o.indicator.indicatorID+"_focusfix").focus()}}),document.getElementById(this.inputElID).setAttribute("aria-labelledby",this.labelSelector);break;case"dropdown":$("#".concat(this.inputElID)).chosen({disable_search_threshold:5,allow_single_deselect:!0,width:"50%"}),$("#".concat(this.inputElID,"_chosen input.chosen-search-input")).attr("aria-labelledby",this.labelSelector);break;case"multiselect":var n=document.getElementById(this.inputElID);if(null!==n&&!0===n.multiple&&"active"!==n.getAttribute("data-choice")){var i=this.indicator.options||[];i=i.map((function(e){return{value:e,label:e,selected:!1}}));var r=new Choices(n,{allowHTML:!1,removeItemButton:!0,editItems:!0,choices:i.filter((function(e){return""!==e.value}))});n.choicesjs=r,n.addEventListener("change",(function(){var e=document.getElementById("".concat(o.indicator.indicatorID,"_empty_value"));if(null===e){var t=document.createElement("option");t.id="".concat(o.indicator.indicatorID,"_empty_value"),t.value="",n.appendChild(t),e=document.getElementById("".concat(o.indicator.indicatorID,"_empty_value"))}e.selected=""===n.value}))}$("#".concat(this.inputElID," ~ input.choices__input")).attr("aria-labelledby",this.labelSelector);break;case"orgchart_group":case"orgchart_position":case"orgchart_employee":!1===this.orgSelectorClassesAdded[this.selType]?($("head").append('<link type="text/css" rel="stylesheet" href="'.concat(this.orgchartPath,"/css/").concat(this.selType,'Selector.css" />')),$.ajax({type:"GET",url:"".concat(this.orgchartPath,"/js/").concat(this.selType,"Selector.js"),dataType:"script",success:function(){o.addOrgSelector(o.selType),o.createOrgSelector()}})):(console.log("already fetched"),this.createOrgSelector());break;case"grid":var a=JSON.parse(this.indicator.options);this.updateGridInstances(a,parseInt(this.indicator.indicatorID),parseInt(this.indicator.series)),this.gridInstances[this.indicator.indicatorID].input();break;case"checkbox":null===(e=document.getElementById(this.inputElID+"_check0"))||void 0===e||e.setAttribute("aria-labelledby",this.labelSelector);break;case"checkboxes":case"radio":null===(t=document.querySelector("#".concat(this.printResponseID," .format-preview")))||void 0===t||t.setAttribute("aria-labelledby",this.labelSelector);break;default:document.getElementById(this.inputElID).setAttribute("aria-labelledby",this.labelSelector)}},methods:{useAdvancedEditor:function(){$("#"+this.inputElID).trumbowyg({btns:["bold","italic","underline","|","unorderedList","orderedList","|","justifyLeft","justifyCenter","justifyRight","fullscreen"]}),$("#textarea_format_button_".concat(this.indicator.indicatorID)).css("display","none")},createOrgSelector:function(){var e=this,t={};(t="group"===this.selType?new groupSelector("orgSel_".concat(this.indicator.indicatorID)):"position"===this.selType?new positionSelector("orgSel_".concat(this.indicator.indicatorID)):new employeeSelector("orgSel_".concat(this.indicator.indicatorID))).apiPath="".concat(this.orgchartPath,"/api/"),t.rootPath="".concat(this.orgchartPath,"/"),t.basePath="".concat(this.orgchartPath,"/"),t.setSelectHandler((function(){$("#sel_prev_".concat(e.indicator.indicatorID)).val(t.selection),$("#orgSel_".concat(e.indicator.indicatorID," input.").concat(e.selType,"SelectorInput")).val("".concat(e.selectorInputPrefix)+t.selection)})),void 0!==t.enableEmployeeSearch&&t.enableEmployeeSearch(),t.initialize()},addGridRow:function(){var e,t,o,n;this.gridInstances[this.indicator.indicatorID].addRow();var i="#grid_".concat(this.indicator.indicatorID,"_").concat(this.indicator.series,"_input tbody > tr > td"),r=document.querySelectorAll(i),a=r.length-1,s=r.length-2,l=r[a].querySelectorAll("img"),c=r[s].querySelector("img"),d=this.gridInstances[this.indicator.indicatorID].deleteRow,u=this.gridInstances[this.indicator.indicatorID].moveUp,p=this.gridInstances[this.indicator.indicatorID].moveDown,m=this.gridInstances[this.indicator.indicatorID].triggerClick;null===(e=l[0])||void 0===e||e.setAttribute("src","../"+(null===(t=l[0])||void 0===t?void 0:t.getAttribute("src"))),l[0].onclick=function(){return u(event)},l[0].onkeydown=function(){return m(event)},null===(o=l[1])||void 0===o||o.setAttribute("src","../"+(null===(n=l[1])||void 0===n?void 0:n.getAttribute("src"))),l[1].onclick=function(){return p(event)},l[1].onkeydown=function(){return m(event)},null==c||c.setAttribute("src","../"+c.getAttribute("src")),c.onclick=function(){return d(event)},c.onkeydown=function(){return m(event)}}},template:'<div class="format-preview">\n\n        <input v-if="baseFormat===\'text\'" :id="inputElID" type="text" class="text_input_preview"/>\n        <input v-if="baseFormat===\'number\'" :id="inputElID" type="number" class="text_input_preview"/>\n\n        <template v-if="baseFormat===\'currency\'">\n            $&nbsp;<input :id="inputElID" type="number" min="0.00" step="0.01" class="text_input_preview"/>\n        </template>\n\n        <template v-if="baseFormat===\'textarea\'">\n            <textarea :id="inputElID" rows="6" class="textarea_input_preview"></textarea>\n            <div :id="\'textarea_format_button_\' + indicator.indicatorID" \n                @click="useAdvancedEditor" \n                style="text-align: right; font-size: 12px"><span class="link">formatting options</span>\n            </div>\n        </template>\n\n        <template v-if="baseFormat===\'radio\'">\n            <template v-for="o, i in truncatedOptions" :key="\'radio_prev_\' + indicator.indicatorID + \'_\' + i">\n                <label class="checkable leaf_check" :for="inputElID + \'_radio\' + i">\n                    <input type="radio" :id="inputElID + \'_radio\' + i" :name="indicator.indicatorID" class="icheck leaf_check"  />\n                    <span class="leaf_check"></span>{{ o }}\n                </label>\n            </template>\n            <div v-if="indicator?.options?.length > 5" style="padding-left: 0.4em"><b> ...</b></div>\n        </template>\n\n        <template v-if="baseFormat===\'checkboxes\' || baseFormat===\'checkbox\'">\n            <template v-for="o, i in truncatedOptions" :key="\'check_prev_\' + indicator.indicatorID + \'_\' + i">\n                <label class="checkable leaf_check" :for="inputElID + \'_check\' + i">\n                    <input type="checkbox" :id="inputElID + \'_check\' + i" :name="indicator.indicatorID" class="icheck leaf_check"  />\n                    <span class="leaf_check"></span>{{ o }}\n                </label>\n            </template>\n            <div v-if="indicator?.options?.length > 5" style="padding-left: 0.4em"><b> ...</b></div>\n        </template>\n        \n        <fieldset v-if="baseFormat===\'fileupload\' || baseFormat===\'image\'" \n            style="padding: 0.5em;"><legend>File Attachment(s)</legend>\n            <p style="margin-bottom: 0.5em;">Select File to attach:</p>\n            <input :id="inputElID" name="formPacket" type="file" />\n        </fieldset>\n\n        <template v-if="baseFormat===\'date\'">\n            <input type="text" :id="inputElID" \n            style="background: url(../../libs/dynicons/?img=office-calendar.svg&w=16); background-repeat: no-repeat; background-position: 4px center; padding-left: 24px; font-size: 1.3em; font-family: monospace" value="" />\n        </template>\n\n        \n        <select v-if="baseFormat===\'dropdown\'" :id="inputElID" style="width: 50%">\n            <option v-for="o, i in truncatedOptions" :key="\'drop_prev_\' + indicator.indicatorID + \'_\' + i">\n            {{o}}\n            </option>\n            <option v-if="indicator?.options?.length > 5" style="padding-left: 0.4em" disabled>(preview showing first 5)</option>\n        </select>\n        \n        <select v-if="baseFormat===\'multiselect\'" multiple \n            :id="inputElID">\n            :name="\'multi_prev_\' + indicator.indicatorID + \'_multiselect[]\'"\n            style="display:none">\n        </select>\n        \n        <template v-if="baseFormat===\'orgchart_group\' || baseFormat===\'orgchart_position\' || baseFormat===\'orgchart_employee\'">\n            <div :id="\'orgSel_\' + indicator.indicatorID" style="min-height:30px"></div>\n            <input :id="\'sel_prev_\' + indicator.indicatorID" style="display: none;">\n        </template>\n\n        <template v-if="baseFormat===\'grid\'">\n            <span style="position: absolute; color: transparent" aria-atomic="true" aria-live="polite" :id="\'tableStatus_\' + indicator.indicatorID" role="status"></span>\n            <div class="tableinput">\n                <table class="table" \n                :id="\'grid_\' + indicator.indicatorID + \'_\' + indicator.series + \'_input\'" \n                style="word-wrap: break-word; table-layout: fixed; height: 100%; display: table">\n                    <thead>\n                    </thead>\n                    <tbody>\n                    </tbody>\n                </table>\n            </div>\n            <button type="button" class="buttonNorm" :id="\'addRowBtn_\' + indicator.indicatorID" \n                title="Grid input add row" aria-label="Grid input add row" \n                @click="addGridRow">\n                + Add row\n            </button>\n        </template>\n\n    </div>'};function y(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function b(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?y(Object(o),!0).forEach((function(t){I(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):y(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function I(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const D={data:function(){return{formID:this.currentCategorySelection.categoryID,dragLI_Prefix:"index_listing_",dragUL_Prefix:"drop_area_parent_",listItems:{},gridInstances:{},allowedConditionChildFormats:["dropdown","text"],showToolbars:!0}},props:{orgchartPath:{type:String}},components:{FormEditingDisplay:{name:"FormEditingDisplay",props:{depth:Number,formNode:Object,index:Number},components:{FormatPreview:v},inject:["truncateText","newQuestion","editQuestion","openAdvancedOptionsDialog","editIndicatorPrivileges","updateGridInstances","listItems","allListItemsAreAdded","allowedConditionChildFormats","showToolbars"],methods:{ifthenUpdateIndicatorID:function(e){vueData.indicatorID=parseInt(e),document.getElementById("btn-vue-update-trigger").dispatchEvent(new Event("click"))}},computed:{children:function(){var e=[];for(var t in this.formNode.child)e.push(this.formNode.child[t]);return e.sort((function(e,t){return e.sort-t.sort}))},isHeaderLocation:function(){var e=parseInt(this.formNode.indicatorID),t=this.listItems[e];return this.allListItemsAreAdded&&(null===t.parentID||null===t.newParentID)},sensitiveImg:function(){return this.sensitive?'<img src="../../libs/dynicons/?img=eye_invisible.svg&amp;w=16" alt="" class="sensitive-icon"\n                    title="This field is sensitive" />':""},conditionalQuestion:function(){return!this.isHeaderLocation&&null!==this.formNode.conditions&&""!==this.formNode.conditions&"null"!==this.formNode.conditions},conditionsAllowed:function(){var e;return!this.isHeaderLocation&&this.allowedConditionChildFormats.includes(null===(e=this.formNode.format)||void 0===e?void 0:e.toLowerCase())},indicatorName:function(){var e=this.required?'<span class="input-required-sensitive">*&nbsp;Required</span>':"",t=this.sensitive?'<span class="input-required-sensitive">*&nbsp;Sensitive</span>':"",o=""!==this.formNode.name.trim()?this.formNode.name.trim():"[ blank ]";return"".concat(o).concat(e).concat(t,"  &nbsp;").concat(this.sensitiveImg)},bgColor:function(){return"rgb(".concat(255-20*this.depth,",").concat(255-20*this.depth,",").concat(255-15*this.depth,")")},printResponseID:function(){return"xhrIndicator_".concat(this.formNode.indicatorID,"_").concat(this.formNode.series)},required:function(){return 1===parseInt(this.formNode.required)},sensitive:function(){return 1===parseInt(this.formNode.is_sensitive)}},template:'<div class="printResponse" :id="printResponseID" \n            :style="{minHeight: depth===0 ? \'50px\': 0, marginLeft: depth===0 ? \'0\': \'0.75rem\'}">\n\n            \x3c!-- EDITING AREA FOR INDICATOR --\x3e\n            <div class="form_editing_area" \n                :class="{\'conditional\': conditionalQuestion, \'form-header\': isHeaderLocation}">\n\n                \x3c!-- TOOLBAR --\x3e\n                <div v-show="showToolbars" \n                    :id="\'form_editing_toolbar_\' + formNode.indicatorID"\n                    :class="{\'conditional\': conditionalQuestion}">\n                    <div style="display: flex; align-items: center;">\n                        <span tabindex="0" role="button" style="cursor: pointer; display: flex; align-items:center;"\n                            @click="editQuestion(parseInt(formNode.indicatorID))"\n                            @keypress.enter="editQuestion(parseInt(formNode.indicatorID))"\n                            :title="\'edit indicator \' + formNode.indicatorID">📝 <span class="toolbar-edit">EDIT</span>\n                        </span>\n                        <span style="margin-left: 0.75rem; white-space:nowrap">{{formNode.format || \'no format\'}}</span>\n                        <span v-if="sensitive" v-html="sensitiveImg" style="margin-left: 0.4rem;"></span>\n                    </div>\n                    <div style="display: flex; align-items:center;">\n                        <button v-if="conditionsAllowed" :id="\'edit_conditions_\' + formNode.indicatorID" \n                            @click="ifthenUpdateIndicatorID(formNode.indicatorID)" :title="\'Edit conditions for \' + formNode.indicatorID" class="icon">\n                            <img src="../../libs/dynicons/?img=preferences-system.svg&amp;w=20" alt="" />\n                        </button>\n                        <button @click="editIndicatorPrivileges(formNode.indicatorID)"\n                            :title="\'Edit indicator \' + formNode.indicatorID + \' privileges\'" class="icon">\n                            <img src="../../libs/dynicons/?img=emblem-readonly.svg&amp;w=20" alt=""/> \n                        </button>\n                        <button @click="openAdvancedOptionsDialog(parseInt(formNode.indicatorID))"\n                            title="Open Advanced Options" class="icon">\n                            <img src="../../libs/dynicons/?img=document-properties.svg&amp;w=20" alt="" />\n                        </button>\n                        <div style="padding-right: 0.5em; color: #007860; font-weight: bold; width:20px; display:flex; align-items:center;">\n                            <div v-if="formNode.has_code" tabindex="0" style="cursor:pointer" class="adv-options-icon" title="advanced options are present">✓</div>\n                        </div>\n                        <button class="btn-general add-subquestion" title="Add Sub-question"\n                            @click="newQuestion(formNode.indicatorID)">\n                            + Add Sub-question\n                        </button>\n                    </div>\n                </div>\n\n                \x3c!-- NAME --\x3e\n                <div v-html="indicatorName" \n                    class="indicator-name-preview" :id="formNode.indicatorID + \'_format_label\'"></div>\n                \n                \x3c!-- FORMAT PREVIEW --\x3e\n                <div v-if="formNode.format!==\'\'" class="form_data_entry_preview">\n                    <format-preview :indicator="formNode" :key="\'FP_\' + formNode.indicatorID"></format-preview>\n                </div>\n            </div>\n\n            \x3c!-- NOTE: RECURSIVE SUBQUESTIONS --\x3e\n            <template v-if="formNode.child">\n                <form-editing-display v-for="child in children"\n                    :depth="depth + 1"\n                    :formNode="child"\n                    :key="\'FED_\' + child.indicatorID">\n                </form-editing-display>\n            </template>\n        </div>'},FormIndexListing:{name:"FormIndexListing",data:function(){return{subMenuOpen:!0}},props:{depth:Number,formNode:Object,index:Number,parentID:Number},inject:["truncateText","addToListItemsObject","selectNewFormNode","selectedNodeIndicatorID","startDrag","onDragEnter","onDragLeave","onDrop","moveListing"],mounted:function(){this.addToListItemsObject(this.formNode,this.parentID,this.index),null!==this.selectedNodeIndicatorID&&document.getElementById("index_listing_".concat(this.selectedNodeIndicatorID)).classList.add("index-selected")},methods:{indexHover:function(e){e.currentTarget.classList.add("index-selected")},indexHoverOff:function(e){e.currentTarget.classList.remove("index-selected")},toggleSubMenu:function(e){32===(null==e?void 0:e.keyCode)&&e.preventDefault(),this.subMenuOpen=!this.subMenuOpen}},computed:{children:function(){var e=[];for(var t in this.formNode.child)e.push(this.formNode.child[t]);return e.sort((function(e,t){return e.sort-t.sort}))},headingNumber:function(){return 0===this.depth?this.index+1+".":""},conditionallyShown:function(){var e=!1;return 0!==this.depth&&null!==this.formNode.conditions&&""!==this.formNode.conditions&&(JSON.parse(this.formNode.conditions)||[]).some((function(e){var t;return"show"===(null===(t=e.selectedOutcome)||void 0===t?void 0:t.toLowerCase())}))&&(e=!0),e},conditionallyHidden:function(){var e=!1;return 0!==this.depth&&null!==this.formNode.conditions&&""!==this.formNode.conditions&&(JSON.parse(this.formNode.conditions)||[]).some((function(e){var t;return"hide"===(null===(t=e.selectedOutcome)||void 0===t?void 0:t.toLowerCase())}))&&(e=!0),e},hasConditionalPrefill:function(){var e=!1;return 0!==this.depth&&null!==this.formNode.conditions&&""!==this.formNode.conditions&&(JSON.parse(this.formNode.conditions)||[]).some((function(e){var t;return"pre-fill"===(null===(t=e.selectedOutcome)||void 0===t?void 0:t.toLowerCase())}))&&(e=!0),e},shortLabel:function(){return XSSHelpers.decodeHTMLEntities(this.truncateText(XSSHelpers.stripAllTags(this.formNode.name)))||"[ blank ]"},suffix:function(){return"".concat(this.formNode.indicatorID,"_").concat(this.formNode.series)},required:function(){return 1===parseInt(this.formNode.required)},isEmpty:function(){return!0===this.formNode.isEmpty}},template:'\n        <li tabindex=0 :title="\'index item \'+ formNode.indicatorID"\n            :class="depth===0 ? \'section_heading\' : \'subindicator_heading\'"\n            @mouseover.stop="indexHover" @mouseout.stop="indexHoverOff"\n            @click.stop="selectNewFormNode($event, formNode)"\n            @keypress.enter.stop="selectNewFormNode($event, formNode)">\n            <div>\n                <span v-if="conditionallyShown" title="question is conditionally shown">→</span>\n                <span v-if="conditionallyHidden" title="question is conditionally hidden">⇏</span>\n                <span v-if="hasConditionalPrefill" title="question has a conditional prefill value">✎</span>\n                {{headingNumber}}&nbsp;{{shortLabel}}\n                <div class="icon_move_container">\n                    <div v-show="formNode.indicatorID===selectedNodeIndicatorID" \n                        tabindex="0" class="icon_move up" role="button" title="move item up"\n                        @click.stop="moveListing($event, selectedNodeIndicatorID, true)"\n                        @keydown.stop.enter.space="moveListing($event, selectedNodeIndicatorID, true)">\n                    </div>\n                    <div v-show="formNode.indicatorID===selectedNodeIndicatorID"\n                        tabindex="0" class="icon_move down" role="button" title="move item down"\n                        @click.stop="moveListing($event, selectedNodeIndicatorID, false)"\n                        @keydown.stop.enter.space="moveListing($event, selectedNodeIndicatorID, false)">\n                    </div>\n                </div>\n                <div v-if="formNode.child" tabindex="0" class="sub-menu-chevron"\n                    @click.stop="toggleSubMenu($event)"\n                    @keydown.stop.enter.space="toggleSubMenu($event)">\n                    {{subMenuOpen ? \'︽\' : \'︾\'}}\n                </div>\n            </div>\n            \n            \x3c!-- NOTE: RECURSIVE SUBQUESTIONS. ul for each for drop zones --\x3e\n            \n            <ul v-show="subMenuOpen" class="form-index-listing-ul" :id="\'drop_area_parent_\'+ formNode.indicatorID"\n                data-effect-allowed="move"\n                @drop.stop="onDrop"\n                @dragover.prevent\n                @dragenter.prevent="onDragEnter"\n                @dragleave="onDragLeave">\n\n                <template v-if="formNode.child">\n                    <form-index-listing v-for="(child, i) in children"\n                        :id="\'index_listing_\' + child.indicatorID"\n                        :depth="depth + 1"\n                        :parentID="formNode.indicatorID"\n                        :formNode="child"\n                        :index="i"\n                        :key="\'index_list_item_\' + child.indicatorID"\n                        draggable="true"\n                        @dragstart.stop="startDrag"> \n                    </form-index-listing>\n                </template>\n            </ul>\n        </li>'},EditPropertiesPanel:{data:function(){var e,t,o,n,i,r,a;return{categoryName:(null===(e=this.currentCategorySelection)||void 0===e?void 0:e.categoryName)||"Untitled",categoryDescription:(null===(t=this.currentCategorySelection)||void 0===t?void 0:t.categoryDescription)||"",workflowID:parseInt(null===(o=this.currentCategorySelection)||void 0===o?void 0:o.workflowID)||0,needToKnow:parseInt(null===(n=this.currentCategorySelection)||void 0===n?void 0:n.needToKnow)||0,sort:parseInt(null===(i=this.currentCategorySelection)||void 0===i?void 0:i.sort)||0,visible:parseInt(null===(r=this.currentCategorySelection)||void 0===r?void 0:r.visible)||(this.currSubformID?1:0),type:(null===(a=this.currentCategorySelection)||void 0===a?void 0:a.type)||"",formID:this.currSubformID||this.currCategoryID}},inject:["APIroot","CSRFToken","currCategoryID","currSubformID","truncateText","ajaxWorkflowRecords","currentCategorySelection","currentCategoryIsSensitive","updateCategoriesProperty","openEditCollaboratorsDialog","closeFormDialog"],computed:{categoryDescriptionDisplay:function(){return XSSHelpers.stripAllTags(this.currentCategorySelection.categoryDescription)},workflowDescription:function(){var e=this,t="";if(0!==this.workflowID){var o=this.ajaxWorkflowRecords.find((function(t){return parseInt(t.workflowID)===e.workflowID}));t=(null==o?void 0:o.description)||""}return t},isSubForm:function(){return""!==this.currentCategorySelection.parentID},isNeedToKnow:function(){return 1===parseInt(this.needToKnow)},changesPending:function(){return[this.categoryName!==this.currentCategorySelection.categoryName,this.categoryDescription!==this.currentCategorySelection.categoryDescription,this.workflowID!==parseInt(this.currentCategorySelection.workflowID),this.needToKnow!==parseInt(this.currentCategorySelection.needToKnow),this.sort!==parseInt(this.currentCategorySelection.sort),this.visible!==parseInt(this.currentCategorySelection.visible),this.type!==this.currentCategorySelection.type].some((function(e){return!0===e}))},formNameCharsRemaining:function(){return 50-this.categoryName.length},formDescrCharsRemaining:function(){return 255-this.categoryDescription.length}},methods:{onSave:function(){var e=this,t=[],o=this.categoryName!==this.currentCategorySelection.categoryName,n=this.categoryDescription!==this.currentCategorySelection.categoryDescription,i=this.workflowID!==parseInt(this.currentCategorySelection.workflowID),r=this.needToKnow!==parseInt(this.currentCategorySelection.needToKnow),a=this.sort!==parseInt(this.currentCategorySelection.sort),s=this.visible!==parseInt(this.currentCategorySelection.visible),l=this.type!==this.currentCategorySelection.type;o&&t.push($.ajax({type:"POST",url:"".concat(this.APIroot,"formEditor/formName"),data:{name:this.categoryName,categoryID:this.formID,CSRFToken:this.CSRFToken},success:function(){e.updateCategoriesProperty(e.formID,"categoryName",e.categoryName)},error:function(e){return console.log("name post err",e)}})),n&&t.push($.ajax({type:"POST",url:"".concat(this.APIroot,"formEditor/formDescription"),data:{description:this.categoryDescription,categoryID:this.formID,CSRFToken:this.CSRFToken},success:function(){e.updateCategoriesProperty(e.formID,"categoryDescription",e.categoryDescription)},error:function(e){return console.log("form description post err",e)}})),i&&t.push($.ajax({type:"POST",url:"".concat(this.APIroot,"formEditor/formWorkflow"),data:{workflowID:this.workflowID,categoryID:this.formID,CSRFToken:this.CSRFToken},success:function(t){!1===t?alert("The workflow could not be set because this form is stapled to another form"):(e.updateCategoriesProperty(e.formID,"workflowID",e.workflowID),e.updateCategoriesProperty(e.formID,"description",e.workflowDescription))},error:function(e){return console.log("workflow post err",e)}})),r&&t.push($.ajax({type:"POST",url:"".concat(this.APIroot,"formEditor/formNeedToKnow"),data:{needToKnow:this.needToKnow,categoryID:this.formID,CSRFToken:this.CSRFToken},success:function(){e.updateCategoriesProperty(e.formID,"needToKnow",e.needToKnow)},error:function(e){return console.log("ntk post err",e)}})),a&&t.push($.ajax({type:"POST",url:"".concat(this.APIroot,"formEditor/formSort"),data:{sort:this.sort,categoryID:this.formID,CSRFToken:this.CSRFToken},success:function(){e.updateCategoriesProperty(e.formID,"sort",e.sort)},error:function(e){return console.log("sort post err",e)}})),s&&t.push($.ajax({type:"POST",url:"".concat(this.APIroot,"formEditor/formVisible"),data:{visible:this.visible,categoryID:this.formID,CSRFToken:this.CSRFToken},success:function(){e.updateCategoriesProperty(e.formID,"visible",e.visible)},error:function(e){return console.log("visibility post err",e)}})),l&&t.push($.ajax({type:"POST",url:"".concat(this.APIroot,"formEditor/formType"),data:{type:this.type,categoryID:this.formID,CSRFToken:this.CSRFToken},success:function(){e.updateCategoriesProperty(e.formID,"type",e.type)},error:function(e){return console.log("type post err",e)}})),Promise.all(t).then((function(){console.log("promise all:",t),e.closeFormDialog()}))}},template:'<div id="edit-properties-panel">\n        <span class="form-id">ID: {{currCategoryID}}\n            <span v-if="currSubformID!==null">(subform {{currSubformID}})</span>\n        </span>\n        <div id="edit-properties-description">\n            <label for="categoryName" style="margin-bottom: 1rem; font-size: 1rem;">Form name\n                <input id="categoryName" type="text" maxlength="50" v-model="categoryName" />\n            </label>\n            \n            <label for="categoryDescription">Form description</label>\n            <textarea id="categoryDescription" maxlength="255" v-model="categoryDescription" rows="3"></textarea>\n        </div>\n        <div id="edit-properties-other-properties">\n            <div style="display:flex;">\n                <button id="editFormPermissions" class="btn-general"\n                    style="width: fit-content;"\n                    @click="openEditCollaboratorsDialog">\n                    Edit Collaborators\n                </button>\n                <button v-if="!changesPending" class="can_update" title="properties can be edited directly in the info panel">ℹ</button>\n                <button v-else class="can_update" title="Apply form property updates" @click="onSave">Apply updates</button>\n            </div>\n            <template v-if="!isSubForm">\n                <div class="panel-properties">\n                    <template v-if="ajaxWorkflowRecords.length > 0">\n                        <label for="workflowID">Workflow\n                        <select id="workflowID" name="select-workflow" \n                            title="select workflow"\n                            v-model.number="workflowID">\n                            <option value="0" :selected="workflowID===0">No Workflow.  Users cannot submit requests</option>\n                            <template v-for="r in ajaxWorkflowRecords" :key="r.workflowID">\n                                <option v-if="parseInt(r.workflowID) > 0"\n                                    :value="r.workflowID"\n                                    :selected="workflowID===parseInt(r.workflowID)">\n                                    ID#{{r.workflowID}}: {{truncateText(r.description, 32)}}\n                                </option>\n                            </template>\n                        </select></label>\n                    </template>\n                    <div v-else style="color: #d00; width: 100%;">A workflow must be set up first</div>\n\n                    <label for="availability" title="When hidden, users will not be able to select this form as an option">Availability\n                        <span v-if="workflowID===0 && visible===1" title="this form will not be selectable without a workflow">⚠️</span>\n                        <select id="availability" title="Select Availability" v-model.number="visible">\n                            <option value="1" :selected="visible===1">Available</option>\n                            <option value="0" :selected="visible===0">Hidden</option>\n                        </select>\n                    </label>\n\n                    <label for="categorySort" title="-128 to 127">Sort\n                        <input id="categorySort" type="number" v-model.number="sort" min="-128" max="127" style="width:60px;"/>\n                    </label>\n\n                    <label for="formType">Form Type\n                    <select id="formType" title="Change type of form" v-model="type" >\n                        <option value="" :selected="type===\'\'">Standard</option>\n                        <option value="parallel_processing" :selected="type===\'parallel_processing\'">Parallel Processing</option>\n                    </select></label>\n\n                    <span v-if="currentCategoryIsSensitive" style="color: #d00;">Need to know: ({{isNeedToKnow ? \'on\' : \'off\'}}) Forced on because sensitive fields are present</span>\n                    <label v-else for="needToKnow"\n                        title="When turned on, the people associated with the workflow are the only ones who have access to view the form. \nForced on if the form contains sensitive information.">Need to know\n                        <select id="needToKnow" v-model.number="needToKnow" :style="{color: isNeedToKnow ? \'#d00\' : \'black\'}">\n                            <option value="0" :selected="!isNeedToKnow">Off</option>\n                            <option value="1" style="color: #d00;" :selected="isNeedToKnow">On</option>\n                        </select>\n                    </label>\n                </div>\n            </template>\n            <div v-else style="margin-top: auto;">This is an Internal Form</div>\n        </div>\n    </div>'}},inject:["APIroot","CSRFToken","appIsLoadingCategoryInfo","ajaxFormByCategoryID","currCategoryID","currSubformID","selectNewCategory","selectNewFormNode","selectedNodeIndicatorID","selectedFormNode","newQuestion","currentCategorySelection","currentCategoryIndicatorTotal"],mounted:function(){console.log("MOUNTED VIEW CONTROLLER",this.currentCategorySelection.categoryID,this.currentCategoryIndicatorTotal)},provide:function(){var e=this;return{listItems:Vue.computed((function(){return e.listItems})),allListItemsAreAdded:Vue.computed((function(){return e.allListItemsAreAdded})),gridInstances:Vue.computed((function(){return e.gridInstances})),showToolbars:Vue.computed((function(){return e.showToolbars})),orgchartPath:this.orgchartPath,addToListItemsObject:this.addToListItemsObject,allowedConditionChildFormats:this.allowedConditionChildFormats,startDrag:this.startDrag,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDrop:this.onDrop,moveListing:this.moveListing,updateGridInstances:this.updateGridInstances}},computed:{currentSectionNumber:function(){var e,t=parseInt(null===(e=this.selectedFormNode)||void 0===e?void 0:e.indicatorID),o=this.listItems[t]||"";return""!==o&&this.allListItemsAreAdded&&null===o.parentID?"".concat(o.sort+1," "):""},allListItemsAreAdded:function(){return this.currentCategoryIndicatorTotal>0&&this.currentCategoryIndicatorTotal===Object.keys(this.listItems).length},sortOrParentChanged:function(){return this.sortValuesToUpdate.length>0||this.parentIDsToUpdate.length>0},sortValuesToUpdate:function(){var e=[];for(var t in this.listItems)this.listItems[t].sort!==this.listItems[t].listIndex&&e.push(b({indicatorID:parseInt(t)},this.listItems[t]));return e},parentIDsToUpdate:function(){var e=[];for(var t in this.listItems)""!==this.listItems[t].newParentID&&this.listItems[t].parentID!==this.listItems[t].newParentID&&e.push(b({indicatorID:parseInt(t)},this.listItems[t]));return e}},methods:{updateGridInstances:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.gridInstances[t]=new gridInput(e,t,o,"")},moveListing:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];32===(null==t?void 0:t.keyCode)&&t.preventDefault();var i=t.currentTarget.closest("ul"),r=document.getElementById("index_listing_".concat(o)),a=Array.from(document.querySelectorAll("#".concat(i.id," > li"))),s=a.filter((function(e){return e!==r})),l=this.listItems[o];n?l.listIndex>0?(s.splice(l.listIndex-1,0,r),a.forEach((function(e){return i.removeChild(e)})),s.forEach((function(t,o){var n=parseInt(t.id.replace("index_listing_",""));i.appendChild(t),e.listItems[n].listIndex=o})),t.currentTarget.focus()):console.log("is first item"):l.listIndex<a.length-1?(s.splice(l.listIndex+1,0,r),a.forEach((function(e){return i.removeChild(e)})),s.forEach((function(t,o){var n=parseInt(t.id.replace("index_listing_",""));i.appendChild(t),e.listItems[n].listIndex=o})),t.currentTarget.focus()):console.log("is last item")},applySortAndParentID_Updates:function(){var e=this,t=[];this.sortValuesToUpdate.forEach((function(o){t.push($.ajax({type:"POST",url:"".concat(e.APIroot,"formEditor/").concat(o.indicatorID,"/sort"),data:{sort:o.listIndex,CSRFToken:e.CSRFToken},success:function(){},error:function(e){return console.log("ind sort post err",e)}}))}));var o=[];this.parentIDsToUpdate.forEach((function(t){o.push($.ajax({type:"POST",url:"".concat(e.APIroot,"formEditor/").concat(t.indicatorID,"/parentID"),data:{parentID:t.newParentID,CSRFToken:e.CSRFToken},success:function(){},error:function(e){return console.log("ind parentID post err",e)}}))}));var n=t.concat(o);Promise.all(n).then((function(t){t.length>0&&e.selectNewCategory(e.formID,null!==e.currSubformID,e.selectedNodeIndicatorID)}))},addToListItemsObject:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=e.indicatorID,i=e.sort,r={sort:i,parentID:t,listIndex:o,newParentID:""};this.listItems[n]=r},updateListItems:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=b({},this.listItems[e]);n.listIndex=o,n.newParentID=t,this.listItems[e]=n},startDrag:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.dataTransfer.dropEffect="move",e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",e.target.id)},onDrop:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.preventDefault();var o=t.dataTransfer.getData("text"),n=t.currentTarget,i=parseInt(o.replace(this.dragLI_Prefix,"")),r="base_drop_area"===n.id?null:parseInt(n.id.replace(this.dragUL_Prefix,"")),a=Array.from(document.querySelectorAll("#".concat(n.id," > li")));if(0===a.length)try{n.append(document.getElementById(o)),this.updateListItems(i,r,0)}catch(e){console.log(e)}else{var s=9999,l=null;a.forEach((function(e){var n=e.getBoundingClientRect().top-t.clientY;e.id!==o&&n>0&&n<s&&(s=n,l=e.id)}));try{null!==l?n.insertBefore(document.getElementById(o),document.getElementById(l)):n.append(document.getElementById(o));var c=Array.from(document.querySelectorAll("#".concat(n.id," > li")));c.forEach((function(t,o){var n=parseInt(t.id.replace(e.dragLI_Prefix,""));e.updateListItems(n,r,o)}))}catch(e){console.log(e)}}n.classList.contains("entered-drop-zone")&&t.target.classList.remove("entered-drop-zone")},onDragLeave:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.target.classList.contains("form-index-listing-ul")&&e.target.classList.remove("entered-drop-zone")},onDragEnter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.target.classList.contains("form-index-listing-ul")&&e.target.classList.add("entered-drop-zone")},toggleToolbars:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.stopPropagation(),32===(null==e?void 0:e.keyCode)&&e.preventDefault(),this.showToolbars=!this.showToolbars}},watch:{allListItemsAreAdded:function(e,t){console.log("watch triggered, allListItemsAreAdded (New/Old value): ",e,t)}},template:'\n    <div v-if="appIsLoadingCategoryInfo" style="border: 2px solid black; text-align: center; \n        font-size: 24px; font-weight: bold; padding: 16px;">\n        Loading... \n        <img src="../images/largespinner.gif" alt="loading..." />\n    </div>\n\n    <template v-else>\n    \x3c!-- TOP INFO PANEL --\x3e\n    <edit-properties-panel :key="currentCategorySelection.categoryID"></edit-properties-panel>\n\n    <div id="form_index_and_editing">\n\n        \x3c!-- NOTE: FORM INDEX DISPLAY --\x3e\n        <div id="form_index_display">\n            <div style="display:flex; align-items: center;">\n                <h3 style="margin: 0; color: black;">Form Index</h3>\n                <button v-if="sortOrParentChanged" @click="applySortAndParentID_Updates" \n                    class="can_update"\n                    title="Apply form structure updates">Apply changes</button>\n                <button v-else class="can_update" title="drag and drop sections and apply updates to change form structure">ℹ</button>\n            </div>\n            <div style="margin: 1em 0">\n                <button v-if="selectedFormNode!==null" class="btn-general" style="width: 100%; margin-bottom: 0.5em;" \n                    @click="selectNewFormNode($event, null)" \n                    id="show_entire_form" \n                    title="Show entire form">Show entire form\n                </button>\n                <button v-else class="btn-general disabled" disabled="true" style="width: 100%; margin-bottom: 0.5em;">Viewing entire form</button>\n                <button class="btn-general" style="width: 100%" \n                    @click="newQuestion(null)"\n                    id="add_new_form_section"\n                    title="Add new form section">\n                    + Add Section\n                </button>\n            </div>\n\n            <ul v-if="ajaxFormByCategoryID.length > 0"\n                id="base_drop_area"\n                class="form-index-listing-ul"\n                data-effect-allowed="move"\n                @drop.stop="onDrop"\n                @dragover.prevent\n                @dragenter.prevent="onDragEnter"\n                @dragleave="onDragLeave">\n\n                <form-index-listing v-for="(formSection, i) in ajaxFormByCategoryID"\n                    :id="\'index_listing_\'+formSection.indicatorID"\n                    :depth=0\n                    :formNode="formSection"\n                    :index=i\n                    :parentID=null\n                    :key="\'index_list_item_\' + formSection.indicatorID"\n                    draggable="true"\n                    @dragstart.stop="startDrag">\n                </form-index-listing>\n            </ul>\n        </div>\n\n        \x3c!-- NOTE: FORM EDITING AND ENTRY PREVIEW --\x3e\n        <div style="display:flex; flex-direction: column; width: 100%;">\n\n            <template v-if="ajaxFormByCategoryID.length > 0 && allListItemsAreAdded">\n                \x3c!-- ENTIRE FORM EDIT / PREVIEW --\x3e\n                <div v-if="selectedFormNode===null" id="form_entry_and_preview">\n                    <template v-for="(formSection, i) in ajaxFormByCategoryID" :key="\'editing_display_\' + formSection.indicatorID">\n                        <div class="form-section-header" style="display: flex;">\n                            <h3>Form Page {{i+1}}</h3>\n                            <button v-if="i===0" id="indicator_toolbar_toggle" \n                                @click.stop="toggleToolbars($event)">\n                                {{showToolbars ? \'Hide\' : \'Show\'}}&nbsp;toolbars\n                            </button>\n                        </div>\n                        <div class="printformblock">\n                            <form-editing-display \n                                :depth="0"\n                                :formNode="formSection"\n                                :index="i"\n                                :key="\'FED_\' + formSection.indicatorID">\n                            </form-editing-display>\n                        </div>\n                    </template>\n                </div>\n\n                \x3c!-- SUBSECTION EDIT / PREVIEW --\x3e\n                <div v-else id="form_entry_and_preview">\n                    <div class="form-section-header" style="display: flex;">\n                        <h3>Form {{currentSectionNumber !== \'\' ? \'Page \' + currentSectionNumber : \'Selection\'}}</h3>\n                        <button id="indicator_toolbar_toggle"\n                            @click.stop="toggleToolbars($event)">\n                            {{showToolbars ? \'Hide\' : \'Show\'}}&nbsp;toolbars\n                        </button>\n                    </div>\n                    <div class="printformblock">\n                        <form-editing-display \n                            :depth="0"\n                            :formNode="selectedFormNode"\n                            :index="-1"\n                            :key="\'FED_\' + selectedFormNode.indicatorID">\n                        </form-editing-display>\n                    </div>\n                </div>\n            </template>\n        </div>\n    </div>\n    </template>'},w={data:function(){return{disabledFields:null}},inject:["APIroot","CSRFToken"],beforeMount:function(){var e=this;$.ajax({type:"GET",url:"".concat(this.APIroot,"form/indicator/list/disabled"),success:function(t){e.disabledFields=t.filter((function(e){return parseInt(e.indicatorID)>0}))},error:function(e){return console.log(e)},cache:!1})},methods:{restoreField:function(e){var t=this;$.ajax({type:"POST",url:"".concat(this.APIroot,"formEditor/").concat(e,"/disabled"),data:{CSRFToken,disabled:0},success:function(){t.disabledFields=t.disabledFields.filter((function(t){return parseInt(t.indicatorID)!==e})),alert("The field has been restored.")},error:function(e){return console.log(e)}})}},template:'<div style="margin: 0 1em;">\n            <h3 style="margin: 0;">List of disabled fields available for recovery</h3>\n            <div>Deleted fields and associated data will be not display in the Report Builder</div>\n            <div>\n                <table v-if="disabledFields !== null" class="usa-table leaf-whitespace-normal">\n                    <thead>\n                        <tr>\n                            <th>indicatorID</th>\n                            <th>Form</th>\n                            <th>Field Name</th>\n                            <th>Input Format</th>\n                            <th>Status</th>\n                            <th>Restore</th>\n                        </tr>\n                    </thead>\n                    <tbody id="fields">\n                        <tr v-for="f in disabledFields" key="f.indicatorID">\n                            <td>{{ f.indicatorID }}</td>\n                            <td>{{ f.categoryName }}</td>\n                            <td>{{ f.name }}</td>\n                            <td>{{ f.format }}</td>\n                            <td>{{ f.disabled }}</td>\n                            <td><button class="buttonNorm" \n                                @click="restoreField(parseInt(f.indicatorID))">\n                                Restore this field</button>\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n                <p v-else>Loading ...</p>\n            </div>\n        </div>'};var x=o(379),_=o.n(x),S=o(795),C=o.n(S),k=o(569),F=o.n(k),T=o(565),N=o.n(T),P=o(216),E=o.n(P),O=o(589),j=o.n(O),A=o(481),R={};function L(e){return function(e){if(Array.isArray(e))return B(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return B(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?B(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}function M(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function V(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?M(Object(o),!0).forEach((function(t){q(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):M(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function q(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}R.styleTagTransform=j(),R.setAttributes=N(),R.insert=F().bind(null,"head"),R.domAPI=C(),R.insertStyleElement=E(),_()(A.Z,R),A.Z&&A.Z.locals&&A.Z.locals;const H={data:function(){var e=this;return{APIroot:"../api/",CSRFToken,siteSettings:{},showCertificationStatus:!1,dialogTitle:"",dialogFormContent:"",dialogButtonText:{confirm:"Save",cancel:"Cancel"},showFormDialog:!1,formSaveFunction:function(){e.$refs[e.dialogFormContent]?e.$refs[e.dialogFormContent].onSave():console.log("got something unexpected")},isEditingModal:!1,appIsLoadingCategoryList:!0,appIsLoadingCategoryInfo:!1,currCategoryID:null,currSubformID:null,currIndicatorID:null,newIndicatorParentID:null,categories:{},currentCategorySelection:{},ajaxFormByCategoryID:[],selectedFormNode:null,indicatorCountSwitch:!0,selectedNodeIndicatorID:null,currentCategoryIsSensitive:!1,currentCategoryIndicatorTotal:0,formsStapledCatIDs:[],ajaxSelectedCategoryStapled:[],ajaxWorkflowRecords:[],ajaxIndicatorByID:{},orgSelectorClassesAdded:{group:!1,position:!1,employee:!1},restoringFields:!1}},provide:function(){var e=this;return{CSRFToken:Vue.computed((function(){return e.CSRFToken})),currCategoryID:Vue.computed((function(){return e.currCategoryID})),currSubformID:Vue.computed((function(){return e.currSubformID})),currIndicatorID:Vue.computed((function(){return e.currIndicatorID})),newIndicatorParentID:Vue.computed((function(){return e.newIndicatorParentID})),isEditingModal:Vue.computed((function(){return e.isEditingModal})),ajaxIndicatorByID:Vue.computed((function(){return e.ajaxIndicatorByID})),categories:Vue.computed((function(){return e.categories})),currentCategorySelection:Vue.computed((function(){return e.currentCategorySelection})),selectedNodeIndicatorID:Vue.computed((function(){return e.selectedNodeIndicatorID})),selectedFormNode:Vue.computed((function(){return e.selectedFormNode})),currentCategoryIsSensitive:Vue.computed((function(){return e.currentCategoryIsSensitive})),currentCategoryIndicatorTotal:Vue.computed((function(){return e.currentCategoryIndicatorTotal})),ajaxFormByCategoryID:Vue.computed((function(){return e.ajaxFormByCategoryID})),appIsLoadingCategoryInfo:Vue.computed((function(){return e.appIsLoadingCategoryInfo})),ajaxSelectedCategoryStapled:Vue.computed((function(){return e.ajaxSelectedCategoryStapled})),formsStapledCatIDs:Vue.computed((function(){return e.formsStapledCatIDs})),ajaxWorkflowRecords:Vue.computed((function(){return e.ajaxWorkflowRecords})),showFormDialog:Vue.computed((function(){return e.showFormDialog})),dialogTitle:Vue.computed((function(){return e.dialogTitle})),dialogFormContent:Vue.computed((function(){return e.dialogFormContent})),dialogButtonText:Vue.computed((function(){return e.dialogButtonText})),formSaveFunction:Vue.computed((function(){return e.formSaveFunction})),restoringFields:Vue.computed((function(){return e.restoringFields})),orgSelectorClassesAdded:Vue.computed((function(){return e.orgSelectorClassesAdded})),APIroot:this.APIroot,newQuestion:this.newQuestion,editQuestion:this.editQuestion,getStapledFormsByCurrentCategory:this.getStapledFormsByCurrentCategory,setCurrCategoryStaples:this.setCurrCategoryStaples,editIndicatorPrivileges:this.editIndicatorPrivileges,selectIndicator:this.selectIndicator,selectNewCategory:this.selectNewCategory,selectNewFormNode:this.selectNewFormNode,updateCategoriesProperty:this.updateCategoriesProperty,updateFormsStapledCatIDs:this.updateFormsStapledCatIDs,addNewCategory:this.addNewCategory,closeFormDialog:this.closeFormDialog,openAdvancedOptionsDialog:this.openAdvancedOptionsDialog,openNewFormDialog:this.openNewFormDialog,openImportFormDialog:this.openImportFormDialog,openFormHistoryDialog:this.openFormHistoryDialog,openConfirmDeleteFormDialog:this.openConfirmDeleteFormDialog,openStapleFormsDialog:this.openStapleFormsDialog,openEditCollaboratorsDialog:this.openEditCollaboratorsDialog,addOrgSelector:this.addOrgSelector,truncateText:this.truncateText,showRestoreFields:this.showRestoreFields,toggleIndicatorCountSwitch:this.toggleIndicatorCountSwitch}},components:{LeafFormDialog:e,IndicatorEditing:t,AdvancedOptionsDialog:n,NewFormDialog:i,ImportFormDialog:r,FormHistoryDialog:a,StapleFormDialog:c,EditCollaboratorsDialog:d,ConfirmDeleteDialog:u,ModFormMenu:h,CategoryCard:g,FormViewController:D,RestoreFields:w},beforeMount:function(){var e=this;this.getCategoryListAll().then((function(t){e.setCategories(t),e.appIsLoadingCategoryList=!1})).catch((function(e){return console.log("error getting category list",e)})),this.getWorkflowRecords().then((function(t){e.ajaxWorkflowRecords=t})).catch((function(e){return console.log("error getting workflow records",e)}))},mounted:function(){var e=this;this.getSiteSettings().then((function(t){e.siteSettings=t,t.leafSecure>=1&&e.getSecureFormsInfo()})).catch((function(e){return console.log("error getting site settings",e)}))},computed:{activeCategories:function(){var e=[];for(var t in this.categories)""===this.categories[t].parentID&&0!==parseInt(this.categories[t].workflowID)&&e.push(V({},this.categories[t]));return e},inactiveCategories:function(){var e=[];for(var t in this.categories)""===this.categories[t].parentID&&0===parseInt(this.categories[t].workflowID)&&e.push(V({},this.categories[t]));return e}},methods:{truncateText:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"...";return e.length<=t?e:e.slice(0,t)+o},addOrgSelector:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.orgSelectorClassesAdded[e]=!0},toggleIndicatorCountSwitch:function(){this.indicatorCountSwitch=!this.indicatorCountSwitch},getCategoryListAll:function(){var e=this;return this.appIsLoadingCategoryList=!0,new Promise((function(t,o){$.ajax({type:"GET",url:"".concat(e.APIroot,"formStack/categoryList/all"),success:function(e){return t(e)},error:function(e){return o(e)}})}))},getWorkflowRecords:function(){var e=this;return new Promise((function(t,o){$.ajax({type:"GET",url:"".concat(e.APIroot,"workflow"),success:function(e){return t(e)},error:function(e){return o(e)}})}))},getSiteSettings:function(){var e=this;return new Promise((function(t,o){$.ajax({type:"GET",url:"".concat(e.APIroot,"system/settings"),success:function(e){return t(e)},error:function(e){return o(e)},cache:!1})}))},fetchLEAFSRequests:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise((function(t,o){var n=new LeafFormQuery;n.setRootURL("../"),n.addTerm("categoryID","=","leaf_secure"),!0===e?(n.addTerm("stepID","=","resolved"),n.join("recordResolutionData")):n.addTerm("stepID","!=","resolved"),n.onSuccess((function(e){t(e)})),n.execute()}))},getSecureFormsInfo:function(){var e=this,t=[$.ajax({type:"GET",url:"".concat(this.APIroot,"form/indicator/list"),success:function(e){},error:function(e){return console.log(e)},cache:!1}),this.fetchLEAFSRequests(!0)];Promise.all(t).then((function(t){var o=t[0],n=t[1];e.checkLeafSRequestStatus(o,n)}))},checkLeafSRequestStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=null,n=!1,i=0;for(var r in t)"approved"===t[r].recordResolutionData.lastStatus.toLowerCase()&&t[r].recordResolutionData.fulfillmentTime>i&&(i=t[r].recordResolutionData.fulfillmentTime,o=r);document.getElementById("secureBtn").setAttribute("href","../index.php?a=printview&recordID="+o);var a=new Date(1e3*parseInt(i));for(var s in e)if(new Date(e[s].timeAdded).getTime()>a.getTime()){n=!0;break}!0===n&&(this.showCertificationStatus=!0,this.fetchLEAFSRequests(!1).then((function(e){if(0===e.length)document.getElementById("secureStatus").innerText="Forms have been modified.",document.getElementById("secureBtn").innerText="Please Recertify Your Site",document.getElementById("secureBtn").setAttribute("href","../report.php?a=LEAF_start_leaf_secure_certification");else{var t=e[Object.keys(e)[0]].recordID;document.getElementById("secureStatus").innerText="Re-certification in progress.",document.getElementById("secureBtn").innerText="Check Certification Progress",document.getElementById("secureBtn").setAttribute("href","../index.php?a=printview&recordID="+t)}})))},getFormByCategoryID:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.appIsLoadingCategoryInfo=!0,new Promise((function(o,n){$.ajax({type:"GET",url:"".concat(e.APIroot,"form/_").concat(t),success:function(t){e.appIsLoadingCategoryInfo=!1,o(t)},error:function(e){return n(e)}})}))},getStapledFormsByCurrentCategory:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new Promise((function(o,n){$.ajax({type:"GET",url:"".concat(e.APIroot,"formEditor/_").concat(t,"/stapled"),success:function(e){o(e)},error:function(e){return n(e)}})}))},getIndicatorByID:function(e){var t=this;return new Promise((function(o,n){$.ajax({type:"GET",url:"".concat(t.APIroot,"formEditor/indicator/").concat(e),success:function(e){return o(e)},error:function(e){return n(e)}})}))},setCategories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];for(var t in e)this.categories[e[t].categoryID]=e[t]},setCurrCategoryStaples:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.ajaxSelectedCategoryStapled=e},updateCategoriesProperty:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this.categories[e][t]=o,this.currentCategorySelection=this.categories[e],console.log("updated curr cat selection",t,this.currentCategorySelection)},updateFormsStapledCatIDs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!0===t){if(this.formsStapledCatIDs.includes(e)){var o=this.formsStapledCatIDs.indexOf(e);this.formsStapledCatIDs=[].concat(L(this.formsStapledCatIDs.slice(0,o)),L(this.formsStapledCatIDs.slice(o+1)))}}else this.formsStapledCatIDs.includes(e)||(this.formsStapledCatIDs=[].concat(L(this.formsStapledCatIDs),[e]))},addNewCategory:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.categories[e]=t},selectNewCategory:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this.restoringFields=!1,o?(console.log("currCatID remains ".concat(this.currCategoryID," setting new subCatID to ").concat(t)),this.currSubformID=t):(console.log("setting new currCatID to ".concat(t," and setting subformID to null")),this.currCategoryID=t,this.currSubformID=null),console.log("RESET: currentCategorySelection, ajaxFormByCategoryID, staples, selectednode, nodeIndID, indicatorTotal"),this.currentCategorySelection={},this.ajaxFormByCategoryID=[],this.ajaxSelectedCategoryStapled=[],this.selectedFormNode=null,this.selectedNodeIndicatorID=null,this.currentCategoryIndicatorTotal=0,vueData.formID=t||"",document.getElementById("btn-vue-update-trigger").dispatchEvent(new Event("click")),null!==t){this.currentCategorySelection=V({},this.categories[t]),this.selectedNodeIndicatorID=n,this.currentCategoryIsSensitive=!1,this.getFormByCategoryID(t).then((function(o){e.ajaxFormByCategoryID=o,e.ajaxFormByCategoryID.forEach((function(t){e.currentCategoryIndicatorTotal=e.getIndicatorCountAndNodeSelection(t,e.currentCategoryIndicatorTotal),e.currentCategoryIsSensitive=e.checkSensitive(t,e.currentCategoryIsSensitive)})),document.getElementById(t).focus()})).catch((function(e){return console.log("error getting form info: ",e)}));var i=this.currSubformID||this.currCategoryID;this.getStapledFormsByCurrentCategory(i).then((function(t){return e.ajaxSelectedCategoryStapled=t}))}else this.appIsLoadingCategoryList=!0,this.categories={},this.getCategoryListAll().then((function(t){e.setCategories(t),e.appIsLoadingCategoryList=!1})).catch((function(e){return console.log("error getting category list",e)})),this.getWorkflowRecords().then((function(t){e.ajaxWorkflowRecords=t})).catch((function(e){return console.log("error getting workflow records",e)}))},selectNewFormNode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.target.classList.contains("icon_move")||e.target.classList.contains("sub-menu-chevron")||(this.selectedFormNode=t,this.selectedNodeIndicatorID=(null==t?void 0:t.indicatorID)||null,console.log("setting form node and indID from list selection",this.selectedNodeIndicatorID))},editIndicatorPrivileges:function(){console.log("clicked edit privileges")},setCustomDialogTitle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.dialogTitle=e},setFormDialogComponent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.dialogFormContent=e},clearCustomDialog:function(){this.setCustomDialogTitle(""),this.setFormDialogComponent(""),this.dialogButtonText={confirm:"Save",cancel:"Cancel"}},closeFormDialog:function(){this.showFormDialog=!1,this.clearCustomDialog()},openConfirmDeleteFormDialog:function(){this.setCustomDialogTitle("<h2>Delete this form</h2>"),this.setFormDialogComponent("confirm-delete-dialog"),this.dialogButtonText={confirm:"Yes",cancel:"No"},this.showFormDialog=!0},openStapleFormsDialog:function(){this.setCustomDialogTitle("<h2>Editing Stapled Forms</h2>"),this.setFormDialogComponent("staple-form-dialog"),this.dialogButtonText={confirm:"Add",cancel:"Close"},this.showFormDialog=!0},openEditCollaboratorsDialog:function(){this.setCustomDialogTitle("<h2>Editing Collaborators</h2>"),this.setFormDialogComponent("edit-collaborators-dialog"),this.dialogButtonText={confirm:"Add",cancel:"Close"},this.showFormDialog=!0},openIndicatorEditing:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t="";t=null===e?"<h2>Adding new question</h2>":this.currIndicatorID===parseInt(e)?"<h2>Editing indicator ".concat(e,"</h2>"):"<h2>Adding question to ".concat(e,"</h2>"),this.setCustomDialogTitle(t),this.setFormDialogComponent("indicator-editing"),this.showFormDialog=!0},openAdvancedOptionsDialog:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.currIndicatorID=t,this.getIndicatorByID(t).then((function(o){e.ajaxIndicatorByID=o,e.setCustomDialogTitle("<h2>Advanced Options for indicator ".concat(t,"</h2>")),e.setFormDialogComponent("advanced-options-dialog"),e.showFormDialog=!0})).catch((function(e){return console.log("error getting indicator information",e)}))},openNewFormDialog:function(){var e=null===this.currCategoryID?"<h2>New Form</h2>":"<h2>New Internal Use Form</h2>";this.setCustomDialogTitle(e),this.setFormDialogComponent("new-form-dialog"),this.showFormDialog=!0},openImportFormDialog:function(){this.setCustomDialogTitle("<h2>Import Form</h2>"),this.setFormDialogComponent("import-form-dialog"),this.showFormDialog=!0},openFormHistoryDialog:function(){this.setCustomDialogTitle("<h2>Form History</h2>"),this.setFormDialogComponent("form-history-dialog"),this.showFormDialog=!0},newQuestion:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.currIndicatorID=null,this.newIndicatorParentID=null!==e?parseInt(e):null,this.isEditingModal=!1,console.log("Adding new indicator.","currID should be null:",this.currIndicatorID,"parentID (null for new sections):",this.newIndicatorParentID,"FORM:",this.currCategoryID),this.openIndicatorEditing(e)},editQuestion:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.currIndicatorID=t,this.newIndicatorParentID=null,this.getIndicatorByID(t).then((function(o){e.isEditingModal=!0,e.ajaxIndicatorByID=o,e.openIndicatorEditing(t)})).catch((function(e){return console.log("error getting indicator information",e)}))},checkSensitive:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!1===t&&(1===parseInt(e.is_sensitive)&&(t=!0),!1===t&&e.child))for(var o in e.child)if(!0===(t=this.checkSensitive(e.child[o],t)))break;return t},getIndicatorCountAndNodeSelection:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(t++,e.indicatorID===this.selectedNodeIndicatorID&&(this.selectedFormNode=e,console.log("found updated node from stored node ID",this.selectedNodeIndicatorID,this.selectedFormNode)),e.child)for(var o in e.child)t=this.getIndicatorCountAndNodeSelection(e.child[o],t);return t},showRestoreFields:function(){this.restoringFields=!0}}};var z=Vue.createApp(H);z.config.unwrapInjectedRef=!0,z.mount("#vue-formeditor-app")})()})();